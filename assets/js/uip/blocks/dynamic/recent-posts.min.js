const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{display:String,name:String,block:Object},data:function(){return{searchString:"",results:[],page:1,totalPages:0,loading:!1,strings:{nothingFound:__("Nothing posts found","uipress-lite"),by:__("By","uipress-lite")},searching:!1}},inject:["uipData","uipress","uiTemplate"],mounted:function(){this.getPosts()},watch:{page:{handler(e,i){""!=e&&this.getPosts()},deep:!0},"block.settings.block.options.postsPerPage.value":{handler(e,i){this.getPosts()},deep:!0}},computed:{returnPerPage(){return this.block.settings.block.options.postsPerPage.value},postTypes(){return this.uipress.get_block_option(this.block,"block","activePostTypes")},perPage(){return this.uipress.get_block_option(this.block,"block","postsPerPage")},limitToAuthor(){let e=this.uipress.get_block_option(this.block,"block","limitToAuthor");return this.uipress.isObject(e)?!("value"in e)||e.value:e}},methods:{getPosts(){let e=this;if(e.loading)return;e.loading=!0;e.postTypes;let i=new FormData;i.append("action","uip_get_recent_posts"),i.append("security",uip_ajax.security),i.append("search",e.searchString),i.append("page",e.page),i.append("postTypes",JSON.stringify(e.postTypes)),i.append("perPage",e.returnPerPage),i.append("limitToAuthor",e.limitToAuthor),e.uipress.callServer(uip_ajax.ajax_url,i).then(i=>{i.error&&(e.uipress.notify(i.message,"uipress-lite","","error",!0),e.searching=!1),i.success&&(e.loading=!1,e.results=i.posts,e.totalPages=i.totalPages)})},goBack(){this.page>1&&(this.page=this.page-1)},goForward(){this.page<this.totalPages&&(this.page=this.page+1)}},template:'\n            <div class="uip-flex uip-flex-column uip-row-gap-s">\n              <div class="uip-flex uip-flex-column uip-row-gap-xs uip-list-area">\n                <loading-chart v-if="loading"></loading-chart>\n                <template  v-if="!loading" v-for="item in results">\n                  <div class="uip-flex uip-flex-row uip-flex-between uip-flex-center" @mouseover="item.hover = true" @mouseleave="item.hover = false">\n                    <div class="">\n                      <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center" >\n                        <div class="uip-text-bold uip-post-title uip-link-default uip-cursor-pointer"  @click="uipress.updatePage(item.link)">{{item.name}}</div>\n                        <div class="uip-text-xs uip-background-primary-wash uip-border-round uip-padding-xxxs uip-post-type-label">{{item.type}}</div>\n                        <div class="uip-flex uip-gap-xxs uip-flex-center" v-if="item.hover">\n                          <div @click="uipress.updatePage(item.editLink)" :href="item.editLink" class="uip-icon uip-cursor-pointer uip-link-muted">edit_document</div>\n                          <a :href="item.link" target="_BLANK" class="uip-icon uip-cursor-pointer uip-link-muted uip-no-underline">open_in_new</a>\n                        </div>\n                      </div>\n                      <div class="uip-text-s uip-post-meta uip-flex uip-flex-row uip-gap-xxxs">\n                        <span class="uip-text-muted">{{strings.by}}</span>\n                        <span class="">{{item.author}}</span>\n                        <span class="uip-text-muted">{{item.modified}}</span>\n                      </div>\n                    </div>\n                  </div>\n                </template>\n                <div v-if="results.length == 0 && searchString.length > 0" class="uip-text-muted uip-text-s">\n                  {{strings.nothingFound}}\n                </div>\n              </div>\n              <div class="uip-flex uip-gap-xs" v-if="totalPages > 1">\n                <button @click="goBack" class="uip-button-default uip-icon uip-nav-button">chevron_left</button>\n                <button @click="goForward" v-if="page < totalPages" class="uip-button-default uip-icon uip-nav-button">chevron_right</button>\n              </div>\n            </div>\n            '}};