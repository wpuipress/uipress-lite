const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function ensureNestedObject(e,...t){t.reduce((e,t,a,r)=>(e[t]||(e[t]={}),e[t]),e)};export function hasNestedPath(e,...t){if(!isObject(e))return!1;Array.isArray(t[0])&&(t=t[0]);for(let a of t){if(!e.hasOwnProperty(a))return!1;e=e[a]}return e};export function prepareJSON(e){return JSON.stringify(e,(e,t)=>"true"===t||!0===t?"uiptrue":"false"===t||!1===t?"uipfalse":""===t?"uipblank":t)};export function deepClone(e){const t=JSON.stringify(e);return JSON.parse(t)};export async function copyToClipboard(e){if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const t=document.createElement("textarea");t.value=e,t.style.position="absolute",t.style.left="-999999px",document.body.prepend(t),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}finally{t.remove()}}};export function isObject(e){return null!==e&&"object"==typeof e&&e.constructor===Object};export function isUnDefined(e){return void 0===e||(null===e||""===e)};export function get_block_option(e,t,a){if(isUnDefined(e.settings))return!1;if(!(t in e.settings))return!1;if(!isObject(e.settings[t]))return!1;if(!("options"in e.settings[t]))return!1;const r=e.settings[t].options;if(!isObject(r[a]))return!1;if(!("value"in r[a]))return!1;let n=r[a].value;return!isUnDefined(n)&&n};export function createUID(){let e=Date.now().toString(16)+Math.random().toString(16).slice(2);return e+=Math.random().toString(16).slice(2)+performance.now().toString(16),(generateRandomString(3)+e).substring(0,24)};export function generateRandomString(e=4){let t="";for(let a=0;a<e;a++){t+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*"abcdefghijklmnopqrstuvwxyz".length)]}return t};export async function sendServerRequest(e,t){const a=__("Bad request","uipress-lite"),r=await fetch(e,{method:"POST",headers:{"Content-Length":"0"},body:t});if(!r.ok)return a(a),{error:!0,message:a};const n=uipParseJson(await r.text());return n||(a(a),{error:!0,message:a})};export function uipParseJson(e){return JSON.parse(e,(e,t)=>"uiptrue"===t||"uipfalse"!==t&&("uipblank"===t?"":t))};export function updateAppPage(e,t){const a=new RegExp("^(?:[a-z+]+:)?//","i"),r=this.adminURL;if(!e)return;if(e.startsWith("#"))return location.hash=e;let n=e=e.replace(/&amp;/g,"&");a.test(e)&&e.includes(r)&&(n=e.replace(r,""));const i=stripUIPparams(n,r),s=new CustomEvent("uipress/app/page/change",{detail:{url:i}});document.dispatchEvent(s),a.test(e)||(e=r+e);let o=new URL(e);const p=this.isBuilder;if("undefined"!=typeof UIPdisableUserPages&&(e=>{if(Array.isArray(e)&&!p)for(let t of e)(o.href==t||o.href.includes(t))&&window.location.assign(o)})(UIPdisableUserPages),"undefined"!=typeof UIPdisableDynamicLoading){if(!isUnDefined(UIPdisableDynamicLoading)&&!p)return window.location.assign(o)}if("undefined"!=typeof UIPfrontEndReload){if(!isUnDefined(UIPfrontEndReload)&&!p&&!o.href.includes(r))return window.location.assign(o)}if(maybeForceReload(o),t&&!p)return window.location.assign(o);const c=new CustomEvent("uip_update_frame_url",{detail:{url:o}});document.dispatchEvent(c),document.querySelector(".uip-page-content-frame")||p||window.location.assign(o)};export function updateActiveLink(e){const t=this.adminURL;let a=new RegExp("^(?:[a-z+]+:)?//","i"),r=a.test(e)&&e.includes(t)?e.replace(t,""):e,n=a.test(e)?e:t+e;n=n.replace("about:blank",""),r=r.replace("about:blank","");let i=new URL(n);i.searchParams.delete("uip-framed-page",1),i.searchParams.delete("uip-hide-screen-options",1),i.searchParams.delete("uip-hide-help-tab",1),i.searchParams.delete("uip-default-theme",1),i.searchParams.delete("uip-hide-notices",1),i.searchParams.delete("uipid",1),maybeForceReload(i);const s=new CustomEvent("uipress/app/page/change",{detail:{url:stripUIPparams(r,t)}});document.dispatchEvent(s)};export function stripUIPparams(e,t){if(!e)return e;let a=new RegExp("^(?:[a-z+]+:)?//","i").test(e)?new URL(e):new URL(t+e);return a.searchParams.delete("uip-framed-page"),a.searchParams.delete("uip-hide-screen-options"),a.searchParams.delete("uip-hide-help-tab"),a.searchParams.delete("uip-default-theme"),a.searchParams.delete("uip-hide-notices"),a.searchParams.delete("uipid"),a.href.replace(t,"")};export function maybeForceReload(e){return"run"==e.searchParams.get("bricks")?window.location.assign(e):"motionpage"==e.searchParams.get("page")?(e.searchParams.set("uip-framed-page",1),window.location.assign(e)):"elementor"==e.searchParams.get("action")?(e.searchParams.set("uip-framed-page",1),window.location.assign(e)):"elementor-app"==e.searchParams.get("page")?(e.searchParams.set("uip-framed-page",1),window.location.assign(e)):"builder"==e.searchParams.get("breakdance")?(e.searchParams.set("uip-framed-page",1),window.location.assign(e)):"true"==e.searchParams.get("ct_builder")?(e.searchParams.set("uip-framed-page",1),window.location.assign(e)):"piotnetforms"==e.searchParams.get("page")&&e.searchParams.get("post")?(e.searchParams.set("uip-framed-page",1),window.location.assign(e)):"zion_builder_active"==e.searchParams.get("action")?(e.searchParams.set("uip-framed-page",1),window.location.assign(e)):"1"==e.searchParams.get("et_fb")?(e.searchParams.set("uip-framed-page",1),window.location.assign(e)):void 0};export async function saveUserPreference(e,t,a){let r=new FormData;return t=prepareJSON(t=0==(t=1==t?"uiptrue":t)?"uipfalse":t),r.append("action","uip_save_user_preference"),r.append("security",uip_ajax.security),r.append("key",e),r.append("value",t),!(await sendServerRequest(uip_ajax.ajax_url,r)).error};export async function validDateTemplate(e,t){return Promise.all(e.map(e=>validateBlock(e,t)))};async function validateBlock(e,t){return!(!e.name||!e.moduleName)&&(t||(e.uid=createUID()),!e.content||(await Promise.all(e.content.map(e=>validateBlock(e,t)))).every(e=>e))}export function renderKeyShortCut(e){const t=["Enter"," ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"],a=[{key:"Enter",icon:"keyboard_return"},{key:" ",icon:"space_bar"},{key:"ArrowLeft",icon:"keyboard_arrow_left"},{key:"ArrowUp",icon:"keyboard_arrow_up"},{key:"ArrowRight",icon:"keyboard_arrow_right"},{key:"ArrowDown",icon:"keyboard_arrow_down"}];let r="";for(let n of e)if("Meta"==n)r+='<span class="uip-command-icon uip-text-muted"></span>';else if("Alt"==n)r+='<span class="uip-alt-icon uip-text-muted"></span>';else if("Shift"==n)r+='<span class="uip-shift-icon uip-text-muted"></span>';else if("Control"==n)r+='<span class="uip-icon uip-text-muted">keyboard_control_key</span>';else if("Backspace"==n)r+='<span class="uip-icon uip-text-muted">backspace</span>';else if(t.includes(n)){r+=`<span class="uip-icon uip-text-muted">${a.find(e=>e.key==n).icon}</span>`}else r+=`<span class="uip-text-muted uip-text-uppercase" style="line-height: 16px;font-size: 11px;">${n}</span>`;return r};export async function deleteRemotePost(e){if(!e)return;let t=Array.isArray(e)?JSON.stringify(e):JSON.stringify([e]),a=new FormData;a.append("action","uip_delete_post"),a.append("security",uip_ajax.security),a.append("id",t);const r=await sendServerRequest(uip_ajax.ajax_url,a);return!r.error&&(!!r.success||void 0)};export async function getUserPreference(e){let t=new FormData;t.append("action","uip_get_user_preference"),t.append("security",uip_ajax.security),t.append("key",e);const a=await sendServerRequest(uip_ajax.ajax_url,t);return!a.error&&a.value};