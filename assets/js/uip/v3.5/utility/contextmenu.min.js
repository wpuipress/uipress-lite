export default{props:{aboveClick:Boolean,disableTeleport:Boolean,offsetY:{default:0,type:Number},offsetX:{default:0,type:Number},snapX:Array,snapY:Array,snapRight:Boolean},data:()=>({isVisible:!1,position:{y:0,x:0}}),methods:{show(t,i){let e={clientX:t.clientX,clientY:t.clientY};if(i&&(e=i),this.snapX&&Array.isArray(this.snapX))for(let t of this.snapX){let i=document.querySelector(t);if(!i)continue;let n=i.getBoundingClientRect();e.clientX=n.left;break}this.position.x=e.clientX+this.offsetX,this.position.y=e.clientY+this.offsetY,this.isVisible=!0,requestAnimationFrame(()=>{this.isVisible&&(this.setupClickOutside(),this.checkForOffScreen())})},checkForOffScreen(){let t=this.$refs.contextmenu.getBoundingClientRect(),i=t.bottom,e=t.right,n=t.left;i>window.innerHeight&&(this.position.y=this.position.y-(i-window.innerHeight)-20),e>window.innerWidth&&(this.position.x=this.position.x-(e-window.innerWidth)-40),n<0&&(this.snapRight?this.position.x=400:this.position.x=32)},close(){this.removeClickOutside(),this.isVisible=!1},setupClickOutside(){document.addEventListener("click",this.onClickOutside),document.addEventListener("contextmenu",this.onClickOutside)},removeClickOutside(){document.removeEventListener("click",this.onClickOutside),document.removeEventListener("contextmenu",this.onClickOutside)},onClickOutside(t){this.$refs.contextmenu&&this.$refs.contextmenu.contains(t.target)||this.close()},returnPosition(){let t="";if(this.snapRight&&(t="transform:translateX(-100%)"),!this.aboveClick)return`top: ${this.position.y}px; left: ${this.position.x}px;${t}`;let i=window.innerHeight-this.position.y;return this.aboveClick?`bottom: ${i}px; left: ${this.position.x}px;${t}`:void 0}},template:'\n  \n\t<teleport to="body" :disabled="disableTeleport">\n\t  <div v-if="isVisible" ref="contextmenu" style="border-radius:calc(var(--uip-border-radius-large) + var(--uip-padding-xs));"\n\t  :style="returnPosition()" @click.prevent.stop\n\t  class="uip-background-default uip-flex uip-flex-column uip-text-normal uip-position-fixed uip-modal-body uip-z-index-99 uip-shadow uip-fade-in uip-body-font">\n\t\t  <slot></slot>\n\t  </div>\n\t</teleport>\n  \n\t\t'};