import{nextTick}from"../../libs/vue-esm-dev.js";export default{props:{pos:{type:String,default:"bottom left"},onOpen:Function,offsetX:{type:Number,default:8},offsetY:{type:Number,default:8}},inject:["seqlData"],data:()=>({modelOpen:!1,currentHeight:0,position:{left:"auto",right:"auto",top:"auto",bottom:"auto",opacity:0}}),beforeUnmount(){document.removeEventListener("scroll",this.handleScroll,!0),document.body.removeEventListener("click",this.onClickOutside)},methods:{resetPosition(){this.position={left:"auto",right:"auto",top:"auto",bottom:"auto",opacity:0}},handleScroll(){this.setPosition()},onClickOutside(t){this.$refs.droptrigger.contains(t.target)||this.seqlData.medialibrary.$refs.confirmBody&&this.seqlData.medialibrary.$refs.confirmBody.contains(t.target)||this.$refs.seqldrop.contains(t.target)||this.close()},show(){if(this.modelOpen)return this.close();this.modelOpen=!0,document.addEventListener("scroll",this.handleScroll,!0),document.body.addEventListener("click",this.onClickOutside),this.onOpen&&this.onOpen(),setTimeout(()=>{this.setPosition()},100)},close(){this.modelOpen=!1,this.position.opacity=0,document.body.removeEventListener("click",this.onClickOutside),document.removeEventListener("scroll",this.handleScroll,!0)},setPosition(){const t=this.$refs.seqldrop,o=this.$refs.droptrigger;if(!t||!o)return;this.resetPosition();const e=o.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth;let n=this.pos.split(" "),r=n[0],l=n[1];"bottom"==r&&(this.position.top=`${e.bottom+this.offsetY}px`),"top"==r&&(this.position.bottom=`${i-e.top+this.offsetY}px`),"left"==r&&(this.position.right=`${s-e.left+this.offsetX}px`),"right"==r&&(this.position.left=`${e.right+this.offsetX}px`),"left"==l&&(this.position.left=`${e.left}px`),"right"==l&&(this.position.right=`${s-e.right}px`),"top"==l&&(this.position.top=`${e.top}px`),"bottom"==l&&(this.position.bottom=`${i-e.bottom}px`),"center"!=l||"left"!=r&&"right"!=r||(this.position.top=`${e.top-t.offsetHeight/2}px`),"center"!=l||"top"!=r&&"bottom"!=r||(this.position.left=`${e.left-(t.offsetWidth-o.offsetWidth)/2}px`),nextTick(()=>{let o=t.getBoundingClientRect();o.top<0&&(this.position.top=`${e.top}px`),o.bottom>i&&(this.position.top=`${o.top-(o.bottom-i)-16}px`),o.left<0&&(this.position.left="0px"),o.right>s&&(this.position.left=`${s-t.offsetWidth}px`),this.position.opacity=1})}},template:'\n\t  <div class="seql-position-relative">\n\t\t  \n\t\t  <div class="seql-cursor-pointer seql-w-100p" \n\t\t  ref="droptrigger"\n\t\t  @click="show($event)">\n\t\t\t  <slot ref="droptrigger" @click="show($event)" name="trigger"/>\n\t\t  </div>\n\t\t  \n\t\t<teleport to="body">\n\t\t\t<div v-if="modelOpen && $slots.content"\n\t\t  ref="seqldrop" class="seql-z-index-9 seql-position-fixed seql-shadow seql-background-default seql-border-rounder seql-body-font" \n\t\t\tstyle="border-radius:calc(var(--seql-border-radius-large) + var(--seql-padding-xxs));" :style="position">\n  \n\t\t\t  <slot name="content"></slot>\n\t\t\t\t\n\t\t\t</div>\n\t\t</teleport>\n\t\t\n\t</div>'};