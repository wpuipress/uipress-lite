const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;import{defineAsyncComponent,nextTick}from"../../../libs/vue-esm.js";export default{components:{mediaLibrary:defineAsyncComponent(()=>import("../utility/media-library.min.js?ver=3.3.1"))},props:{returnData:Function,value:Object,args:Object},data:()=>({open:!1,loading:!0,hasPositioning:!0,img:{url:"",dynamic:!1,dynamicKey:"",loading:!1,sizing:{}},fileType:"",manualURL:"",uploading:!1,updating:!1,strings:{dynamicData:__("Dynamic data","uipress-lite"),currentValue:__("Current value","uipress-lite"),select:__("select","uipress-lite"),dataPos:__("Dynamic data position","uipress-lite"),replace:__("Replace","uipress-lite"),edit:__("Edit","uipress-lite"),upload:__("Upload","uipress-lite"),uploading:__("Uploading","uipress-lite"),library:__("Library","uipress-lite"),dynamic:__("Dynamic","uipress-lite"),chooseImage:__("Add image","uipress-lite"),backgroundImage:__("Image","uipress-lite"),addImage:__("Add image","uipress-lite"),url:__("URL","uipress-lite")}}),watch:{value:{handler(i,e){this.updating||this.formatInput()},deep:!0,immediate:!0},img:{handler(i,e){this.updating||this.returnData(this.img)},deep:!0},manualURL:{handler(i,e){""!=i&&(this.removeDynamicItem(),this.img.url=i)}}},mounted(){this.args&&this.isObject(this.args)&&"hasPositioning"in this.args&&(this.hasPositioning=this.args.hasPositioning)},computed:{imgReset:()=>({url:"",dynamic:!1,dynamicKey:"",loading:!1,sizing:{}})},methods:{formatInput(){this.img=this.isObject(this.value)?this.value:this.imgReset},async chooseImage(){const i=await this.$refs.mediaLibrary.show();i&&(this.img.url=i.source_url)},removeDynamicItem(){this.img.dynamic=!1,this.img.dynamicKey="",this.img.url="",this.returnData({url:this.img.value,dynamic:this.img.dynamic,dynamicKey:this.img.dynamicKey,dynamicPos:this.img.dynamicPos})},returnBackgroundImage(){let i=this.img.url;return i?`background-image: url(${i})`:""}},template:'\n            \n            <div class="uip-flex uip-flex-column uip-row-gap-s">\n              \n              <div class="uip-background-muted uip-border-rounder uip-flex uip-flex-center uip-flex-middle uip-position-relative uip-scale-in-center uip-h-120 uip-w-240 uip-background-contain uip-background-no-repeat  uip-background-center" :style="returnBackgroundImage()">\n                \n                  \n                <button @click="chooseImage()" class="uip-button-primary uip-text-s">\n                  <div v-if="img.url" class="uip-text-bold">{{strings.replace}}</div>\n                  <div v-if="!img.url" class="uip-flex uip-gap-xxs uip-flex-center">\n                    <div class="uip-icon uip-icon-medium">add</div>\n                    <div class="uip-text-bold">{{strings.chooseImage}}</div>\n                  </div>\n                </button>  \n                \n              </div>\n              \n              \n              <div class="uip-padding-left-xs uip-flex uip-flex-column uip-row-gap-xs">\n              \n                <div class="uip-grid-col-1-3">\n                \n                  <div class="uip-text-muted uip-flex uip-flex-center uip-text-s"><span>{{strings.url}}</span></div>\n                    \n                  <input class="uip-input uip-input-small" type="text" v-model="img.url">\n                  \n                </div>\n                \n                <background-position v-if="hasPositioning" :value="img.sizing" :returnData="function(d){img.sizing = d}"></background-position>\n              </div>\n              \n              <mediaLibrary ref="mediaLibrary"/>\n              \n            </div>\n        \n        \n        '};