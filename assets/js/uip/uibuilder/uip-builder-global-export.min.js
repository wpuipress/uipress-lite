const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{args:Object,triggerClass:String},data:function(){return{modelOpen:!0,themeLoading:!1,themes:[],saving:!1,finished:!1,strings:{globalExport:__("Global export"),settingsExplanation:__("Choose the sections you wish to export to another site and click export to generate a file containing all of uiPress settings, templates, menus and theme styles","uipress-lite"),templates:__("Templates","uipress-lite"),siteSettings:__("Site settings","uipress-lite"),themeStyles:__("Theme styles","uipress-lite"),adminMenus:__("Admin menus","uipress-lite"),cancel:__("Cancel","uipress-lite"),export:__("Export","uipress-lite")},exportOptions:{templates:!0,siteSettings:!0,themeStyles:!0,adminMenus:!0}}},inject:["uipress","uipData","uiTemplate","router"],watch:{currentStep:{handler(e,t){2==e&&this.fetchThemes()}}},mounted:function(){},computed:{isDisabledButton(){if(!(this.exportOptions.templates||this.exportOptions.siteSettings||this.exportOptions.themeStyles||this.exportOptions.adminMenus))return!0}},methods:{closeThisComponent(){document.documentElement.removeEventListener("click",this.onClickOutside,!1),this.router.push("/")},exportEverything(){let e=this,t=new FormData;t.append("action","uip_global_export"),t.append("security",uip_ajax.security),t.append("options",JSON.stringify(e.exportOptions));let i=e.uipress.notify(__("Exporting uiPress content","uipress-lite"),"","default",!1,!0);e.uipress.callServer(uip_ajax.ajax_url,t).then(t=>{t.error?e.uipress.notify(t.message,"","error",!0):e.downloadExport(t.export,i)})},downloadExport(e,t){self=this;let i=self.uipress.uipEncodeJson({uipGlobalExport:e}),s=new Date,n=String(s.getDate()).padStart(2,"0"),p="uip-global-export--"+(String(s.getMonth()+1).padStart(2,"0")+"-"+n+"-"+s.getFullYear())+".json",l="data:text/json;charset=utf-8,"+encodeURIComponent(i),o=self.$refs.globalExport;o.setAttribute("href",l),o.setAttribute("download",p),o.click(),self.uipress.notify(__("Export complete","uipress-lite"),"","success"),self.uipress.destroy_notification(t)}},template:'\n    \n    \n      <div class="uip-position-fixed uip-top-0 uip-left-0 uip-h-viewport uip-w-vw uip-background-black-wash uip-flex uip-flex-center uip-flex-middle uip-fade-in uip-text-normal uip-z-index-1" tabindex="1">\n        <div ref="uipmodal" class="uip-background-default uip-border-rounder uip-border uip-flex uip-flex-column uip-row-gap-s uip-scale-in uip-w-400 uip-z-index-1 uip-transition-all uip-padding-s">\n          \n          \n          \x3c!-- title --\x3e\n          <div class="uip-flex uip-flex-between uip-flex-center">\n            <div class="uip-text-bold">{{strings.globalExport}}</div>\n            <div class="uip-icon uip-link-muted uip-padding-xxs uip-border-round hover:uip-background-muted" @click="closeThisComponent()">close</div>\n          </div>\n          \x3c!-- end title --\x3e\n          \n          <div class="uip-border-top"></div>\n          \n          <div class="uip-text-muted">{{strings.settingsExplanation}}</div>\n          \n          <div class="uip-flex uip-flex-column uip-row-gap-xs">\n            \n            <label class="uip-flex uip-gap-xs uip-flex-center">\n              <input class="uip-user-check uip-checkbox uip-margin-remove" v-model="exportOptions.templates" type="checkbox">\n              <div class="">{{strings.templates}}</div>\n            </label>\n            \n            <label class="uip-flex uip-gap-xs uip-flex-center">\n              <input class="uip-user-check uip-checkbox uip-margin-remove" v-model="exportOptions.siteSettings" type="checkbox">\n              <div class="">{{strings.siteSettings}}</div>\n            </label>\n            \n            <label class="uip-flex uip-gap-xs uip-flex-center">\n              <input class="uip-user-check uip-checkbox uip-margin-remove" v-model="exportOptions.themeStyles" type="checkbox">\n              <div class="">{{strings.themeStyles}}</div>\n            </label>\n            \n            <label class="uip-flex uip-gap-xs uip-flex-center">\n              <input class="uip-user-check uip-checkbox uip-margin-remove" v-model="exportOptions.adminMenus" type="checkbox">\n              <div class="">{{strings.adminMenus}}</div>\n            </label>\n          \n          </div>\n          \n          <div class="uip-border-top"></div>\n          \n          <div class="uip-flex uip-flex-between uip-gap-xs">\n            <router-link to="/" class="uip-button-default uip-no-underline">{{strings.cancel}}</router-link>\n            \n            <button @click="exportEverything()" class="uip-button-primary" :disabled="isDisabledButton">{{strings.export}}</button>\n            \n          </div>\n          \n          <a class="uip-hidden" ref="globalExport"></a>\n          \n          \n        </div>\n      </div>\n    \n    '}};