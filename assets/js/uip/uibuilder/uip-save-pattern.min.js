const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{args:Object,triggerClass:String},data:function(){return{modelOpen:!1,dropWidth:0,position:this.dropPos,saving:!1,theBlock:this.args.blockitem,strings:{saveAsPattern:__("Save as pattern","uipress-lite"),patternTitle:__("Pattern title","uipress-lite"),patternType:__("Pattern type","uipress-lite"),patternDescription:__("Patterns can be either single components or entire layoutsd and are a great way of creating reusable blocks for your projects."),savePattern:__("Save pattern","uipress-lite"),description:__("Description","uipress-lite"),patternIcon:__("Pattern icon","uipress-lite")},newPattern:{name:"",description:"",type:"block",icon:{value:"interests"}},patternTypes:[{name:"layout",label:__("Layout","uipress-lite")},{name:"block",label:__("Block","uipress-lite")}]}},inject:["uipress","uiTemplate"],watch:{},mounted:function(){},computed:{returnBlockName(){return this.blockitem.name},returnBlock(){return this.theBlock=this.args.blockitem,this.theBlock}},methods:{savePattern(){this.saving=!0;let e=this.args.blockitem;this.newPattern.name&&""!=this.newPattern.name||(this.uipress.notify(__("Pattern not saved","uipress-lite"),__("Pattern title is required","uipress-lite"),"warning",!0),this.saving=!1);let t=this;t.uipress.blockHouseKeeping(e).then(n=>{t.savePatternToDb(e)})},savePatternToDb(e){let t=this,n=e.uid,i=JSON.stringify(e,(e,t)=>"true"===t?"uiptrue":!0===t?"uiptrue":"false"===t?"uipfalse":!1===t?"uipfalse":""===t?"uipblank":t),s=new FormData;s.append("action","uip_save_ui_pattern"),s.append("security",uip_ajax.security),s.append("pattern",i),s.append("name",t.newPattern.name),s.append("type",t.newPattern.type),s.append("description",t.newPattern.description),s.append("icon",t.newPattern.icon.value),t.uipress.callServer(uip_ajax.ajax_url,s).then(e=>{if(e.error&&(t.uipress.notify(e.message,"uipress-lite","","error",!0),t.saving=!1),e.success){t.uipress.notify(__("Pattern saved","uipress-lite"),"","success",!0),t.saving=!1,t.uiTemplate.patterns=e.patterns;let i=e.patternid;t.uipress.searchForBlock(t.uiTemplate.content,n).then(e=>{e&&(e.patternID=i)})}})}},template:'\n          <div class="uip-flex uip-flex-column uip-row-gap-xs">\n        \n          \n            <div class="uip-flex uip-flex-column uip-row-gap-xxs">\n              <div class="uip-text-s uip-text-muted">{{strings.patternTitle}}</div>\n              <input class="uip-input" type="text" v-model="newPattern.name">\n            </div>\n          \n            <div class="uip-flex uip-flex-column uip-row-gap-xxs">\n              <div class="uip-text-s uip-text-muted">{{strings.patternIcon}}</div>\n              <icon-select :value="newPattern.icon" :returnData="function(data) {newPattern.icon = data}"></icon-select>\n            </div>\n          \n            <div class="uip-flex uip-flex-column uip-row-gap-xxs">\n              <div class="uip-text-s uip-text-muted">{{strings.description}}</div>\n              <textarea class="uip-input" rows="4" v-model="newPattern.description"></textarea>\n            </div>\n          \n            <div class="uip-flex uip-flex-column uip-row-gap-xxs">\n              <div class="uip-text-s uip-text-muted">{{strings.patternType}}</div>\n              <select class="uip-input" v-model="newPattern.type">\n                <template v-for="option in patternTypes">\n                  <option :value="option.name">{{option.label}}</option>\n                </template>\n              </select>\n            </div>\n          \n            <div class="uip-margin-top-s">\n              <uip-save-button :saving="saving" :buttonText="strings.savePattern" :saveFunction="savePattern"></uip-save-button>\n            </div>\n          \n\t\t    </div>'}};