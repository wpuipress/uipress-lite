const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;import{deleteRemotePost}from"../v3.5/utility/functions.min.js";import{defineAsyncComponent,nextTick}from"../../libs/vue-esm.js";const screenOverlay={data:()=>({show:!1}),template:'\n    \n    <div @mouseenter="show=true" @mouseleave="show=false" class="uip-position-relative uip-flex">\n      \n      <div class="uip-flex-grow">\n        <slot name="trigger"/>\n      </div>\n      \n      <div class="uip-position-relative uip-flex-shrink">\n        <div v-if="show" style="top:64px;bottom:0px;max-height:calc(100vh - 64px);"\n        class="uip-position-fixed uip-z-index-9 uip-w-400 uip-padding-bottom-l uip-overflow-auto uip-background-default uip-border-left">\n        \n          <slot name="content"/>\n        \n        </div>\n      </div>\n    \n    </div>\n  '};export default{inject:["uiTemplate"],components:{screenOverlay:screenOverlay,Confirm:defineAsyncComponent(()=>import("../v3.5/utility/confirm.min.js?ver=3.3.1"))},data:()=>({loading:!0,themes:[],search:"",activeTemplate:!1,imageIndex:0,imageHover:!1,draggingBlock:!1,strings:{missingMessage:__("This block no longer exists","uipress-lite"),templateLibrary:__("Template library","uipress-lite"),pro:__("Pro","uipress-lite"),searchTemplates:__("Search templates","uipress-lite"),backToAllThemes:__("Back to all templates","uipress-lite"),includesProBlocks:__("Includes pro blocks","uipress-lite"),createdBy:__("Created by","uipress-lite"),addToTemplate:__("Add to template","uipress-lite"),replaceContent:__("Replace current layout","uipress-lite"),addAtEndOfContent:__("Add to end of layout","uipress-lite"),requires:__("Requires uipress","uipress-lite"),downloadcount:__("How many times this template has been downloaded","uipress-lite"),sortBy:__("Sort by","uipress-lite"),include:__("Include","uipress-lite"),uiTemplates:__("UI templates","uipress-lite"),pages:__("Pages","uipress-lite"),sections:__("Sections","uipress-lite"),patterns:__("Patterns","uipress-lite"),patternTitle:__("Name","uipress-lite"),patternType:__("Type","uipress-lite"),savePattern:__("Save pattern","uipress-lite"),description:__("Description","uipress-lite"),patternIcon:__("Icon","uipress-lite")},patternTypes:{layout:{name:"layout",label:__("Layout","uipress-lite")},block:{name:"block",label:__("Block","uipress-lite")}},sortby:"newest",typeOptions:{uiTemplates:{label:__("UI templates","uipress-lite"),value:"ui-template",selected:!0},adminPages:{label:__("Admin pages","uipress-lite"),value:"ui-admin-page",selected:!0}}}),watch:{sortby:{handler(e,i){this.fetchThemes()}},typeOptions:{handler(e,i){this.fetchThemes()},deep:!0}},mounted(){this.fetchThemes()},computed:{returnThemes(){return this.themes.filter(e=>"Layout"===e.type)},returnPages(){return this.themes.filter(e=>"Admin Page"===e.type)},returnSections(){return this.themes.filter(e=>"Section"===e.type)},returnSortBy(){return this.sortby},returnFilter(){let e=Object.values(this.typeOptions).filter(e=>e.selected).map(e=>e.value).join("||");return e||(this.typeOptions.uiTemplates.selected=!0),e}},methods:{fetchThemes(){this.loading=!0;const e=new FormData,i=`https://api.uipress.co/templates/list/?sort=${this.returnSortBy}&filter=${this.returnFilter}&v321=true`;this.sendServerRequest(i,e).then(e=>{this.loading=!1,e.error?this.uipApp.notifications.notify(e.message,"uipress-lite","","error",!0):this.themes=e})},navImagesForward(e){e.imageIndex=(e.imageIndex+1)%e.images.length},navImagesBackward(e){e.imageIndex=(e.imageIndex-1+e.images.length)%e.images.length},returnThemeIndex:e=>("imageIndex"in e||(e.imageIndex=0),e.imageIndex),clone:e=>({remote:!0,path:`https://api.uipress.co/templates/get/?templateid=${e.ID}`}),importThis(e,i){const n={remote:!0,path:`https://api.uipress.co/templates/get/?templateid=${e.ID}`};i?this.uiTemplate.content=[n]:this.uiTemplate.content.push(n)},importThisPattern(e){this.uiTemplate.content.push(this.clonePattern(e))},returnIcon:e=>e.icon&&""!==e.icon?e.icon:"layout"===e.type?"account_tree":"block"===e.type?"add_box":"interests",async deleteThisItem(e){await this.$refs.confirm.show({title:__("Delete pattern","uipress-lite"),message:__("Are you sure you want to delete this custom pattern?","uipress-lite"),okButton:__("Delete pattern","uipress-lite")})&&(await deleteRemotePost(e),this.uipApp.notifications.notify(__("Pattern deleted","uipress-lite"),"","success",!0),this.getPatterns())},getPatterns(){const e=new FormData;e.append("action","uip_get_ui_patterns_list"),e.append("security",uip_ajax.security),this.sendServerRequest(uip_ajax.ajax_url,e).then(e=>{e.error&&this.uipApp.notifications.notify(e.message,"uipress-lite","","error",!0),e.success&&(this.uiTemplate.patterns=e.patterns)})},clonePattern(e){const i=this.duplicateBlock(e.template);return JSON.parse(JSON.stringify(i))},duplicateBlock(e){const i={...e};return i.uid=this.createUID(),i.options=[],i.settings=JSON.parse(JSON.stringify(i.settings)),i.content&&(i.content=this.duplicateChildren(i.content)),i},duplicateChildren(e){return e.map(e=>{const i={...e};return i.uid=this.createUID(),i.settings=JSON.parse(JSON.stringify(i.settings)),i.content&&(i.content=this.duplicateChildren(i.content)),i})}},template:'\n    \n    <div class="uip-background-default uip-flex uip-flex-column uip-border-box uip-max-h-100p">\n        \n        <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle"><loading-chart></loading-chart></div>\n        \n\t\t    <div v-else class="uip-flex uip-flex-column uip-h-100p uip-max-h-100p uip-row-gap-xs">\n            \n            \n            \n            \x3c!--Ui templates--\x3e\n            <screenOverlay class="uip-w-100p"> \n            \n              <template v-slot:trigger>\n                <div class="uip-flex uip-gap-s uip-padding-xxs hover:uip-background-muted uip-border-rounder uip-flex-center">\n                \n                    <div class="uip-icon uip-text-xl uip-background-muted uip-border-rounder uip-padding-xxs">\n                      space_dashboard\n                    </div>   \n                    <div class="uip-text-emphasis uip-flex-grow">{{strings.uiTemplates}}</div>             \n                    \n                    <div class="uip-icon uip-text-l">chevron_right</div>\n                </div>\n              </template>\n              \n              <template v-slot:content>\n                \n                \n                  <uip-draggable \n                  :list="returnThemes" \n                  class="uip-padding-m uip-flex uip-flex-column uip-row-gap-m"\n                  handle=".uip-block-drag"\n                  :group="{ name: \'uip-blocks\', pull: \'clone\', put: false, revertClone: true }"\n                  animation="300"\n                  :sort="false"\n                  :clone="clone"\n                  itemKey="name"\n                  >\n                    <template v-for="(theme, index) in returnThemes" :key="theme.ID" :index="index">\n                    \n                        <div class="uip-cursor-pointer">\n                        \n                          <div class="uip-flex uip-flex-column uip-row-gap-xs">\n                          \n                              \n                              <div class="uip-w-100p uip-border-rounder uip-ratio-16-10 uip-block-drag uip-background-grey uip-background-no-repeat uip-background-center uip-background-cover" :style="\'background-image:url(\' + theme.images[returnThemeIndex(theme)] + \');\'" >\n                              </div>\n                              \n                              <div class="uip-flex uip-gap-xs uip-flex-center">\n                              \n                                <div class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon" @click="theme.showInfo = !theme.showInfo">lightbulb</div>\n                                <div class="uip-flex-grow uip-text-bold">{{theme.name}}</div>\n                                \n                                <div v-if="theme.images.length > 1" class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="navImagesBackward(theme)">chevron_left</div>\n                                <div v-if="theme.images.length > 1" class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="navImagesForward(theme)">chevron_right</div>\n                                \n                                <div class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="importThis(theme, true)">download</div>\n                              </div>\n                              \n                              <template v-if="theme.showInfo">\n                              \n                                <div class="uip-text-muted" style="line-height:1.6">\n                                  {{theme.description}}\n                                </div>\n                                \n                                <div class="uip-flex uip-flex-gap-xs uip-flex-between">\n                                  \n                                  <div class="uip-text-xs uip-background-primary-wash uip-border-rounder uip-padding-left-xxxs uip-padding-right-xxxs uip-flex uip-flex-row uip-gap-xxs uip-flex-center">\n                                    <span class="uip-icon">file_download</span>\n                                    <span>{{theme.downloads}}</span>\n                                  </div>\n                                  \n                                  <div class="uip-text-muted uip-text-s">\n                                    {{strings.createdBy}} <a href="https://uipress.co" class="uip-link-default">{{theme.created_by}}</a>\n                                  </div>\n                                  \n                                </div>\n                              \n                              </template>\n                            \n                            \n                          </div>\n                        </div>\n                      \n                    </template>\n                  \n                  </uip-draggable>\n                \n                \n              </template>\n            \n            </screenOverlay>\n            \n            \n            \n            \x3c!--Ui Pages--\x3e\n            <screenOverlay class="uip-w-100p">\n            \n              <template v-slot:trigger>\n                <div class="uip-flex uip-gap-s uip-padding-xxs hover:uip-background-muted uip-border-rounder uip-flex-center">\n                \n                    <div class="uip-icon uip-text-xl uip-background-muted uip-border-rounder uip-padding-xxs">\n                      article\n                    </div>   \n                    <div class="uip-text-emphasis uip-flex-grow">{{strings.pages}}</div>             \n                    \n                    <div class="uip-icon uip-text-l">chevron_right</div>\n                </div>\n              </template>\n              \n              <template v-slot:content>\n                \n                <uip-draggable \n                :list="returnPages" \n                class="uip-padding-m uip-flex uip-flex-column uip-row-gap-m"\n                handle=".uip-block-drag"\n                :group="{ name: \'uip-blocks\', pull: \'clone\', put: false, revertClone: true }"\n                animation="300"\n                :sort="false"\n                :clone="clone"\n                itemKey="name"\n                >\n                  <template v-for="(theme, index) in returnPages" :key="theme.ID" :index="index">\n                  \n                      <div class="uip-cursor-pointer">\n                      \n                        <div class="uip-flex uip-flex-column uip-row-gap-xs">\n                        \n                            \n                            <div class="uip-w-100p uip-border-rounder uip-ratio-16-10 uip-block-drag uip-background-grey uip-background-no-repeat uip-background-center uip-background-cover" :style="\'background-image:url(\' + theme.images[returnThemeIndex(theme)] + \');\'" >\n                            </div>\n                            \n                            <div class="uip-flex uip-gap-xs uip-flex-center">\n                            \n                              <div class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon" @click="theme.showInfo = !theme.showInfo">lightbulb</div>\n                              <div class="uip-flex-grow uip-text-bold">{{theme.name}}</div>\n                              \n                              <div v-if="theme.images.length > 1" class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="navImagesBackward(theme)">chevron_left</div>\n                              <div v-if="theme.images.length > 1" class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="navImagesForward(theme)">chevron_right</div>\n                              \n                              <div class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="importThis(theme, true)">download</div>\n                            </div>\n                            \n                            <template v-if="theme.showInfo">\n                            \n                              <div class="uip-text-muted" style="line-height:1.6">\n                                {{theme.description}}\n                              </div>\n                              \n                              <div class="uip-flex uip-flex-gap-xs uip-flex-between">\n                                \n                                <div class="uip-text-xs uip-background-primary-wash uip-border-rounder uip-padding-left-xxxs uip-padding-right-xxxs uip-flex uip-flex-row uip-gap-xxs uip-flex-center">\n                                  <span class="uip-icon">file_download</span>\n                                  <span>{{theme.downloads}}</span>\n                                </div>\n                                \n                                <div class="uip-text-muted uip-text-s">\n                                  {{strings.createdBy}} <a href="https://uipress.co" class="uip-link-default">{{theme.created_by}}</a>\n                                </div>\n                                \n                              </div>\n                            \n                            </template>\n                          \n                          \n                        </div>\n                      </div>\n                    \n                  </template>\n                \n                </uip-draggable>\n                \n              </template>\n            \n            </screenOverlay>\n            \n            \n            \n            \n            \x3c!--sections--\x3e\n            <screenOverlay class="uip-w-100p" >\n            \n              <template v-slot:trigger>\n                <div class="uip-flex uip-gap-s uip-padding-xxs hover:uip-background-muted uip-border-rounder uip-flex-center">\n                \n                    <div class="uip-icon uip-text-xl uip-background-muted uip-border-rounder uip-padding-xxs">\n                      calendar_view_day\n                    </div>   \n                    <div class="uip-text-emphasis uip-flex-grow">{{strings.sections}}</div>             \n                    \n                    <div class="uip-icon uip-text-l">chevron_right</div>\n                </div>\n              </template>\n              \n              <template v-slot:content>\n                \n                <uip-draggable \n                :list="returnSections" \n                class="uip-padding-m uip-flex uip-flex-column uip-row-gap-m"\n                handle=".uip-block-drag"\n                :group="{ name: \'uip-blocks\', pull: \'clone\', put: false, revertClone: true }"\n                animation="300"\n                :sort="false"\n                :clone="clone"\n                itemKey="name"\n                >\n                  <template v-for="(theme, index) in returnSections" :key="theme.ID" :index="index">\n                  \n                      <div class="uip-cursor-pointer">\n                      \n                        <div class="uip-flex uip-flex-column uip-row-gap-xs">\n                        \n                            <div class="uip-w-100p uip-border-rounder uip-ratio-16-10 uip-block-drag uip-background-grey uip-background-no-repeat uip-background-center" :style="\'background-image:url(\' + theme.images[returnThemeIndex(theme)] + \');background-size:90%;\'" >\n                            </div>\n                            \n                            <div class="uip-flex uip-gap-xs uip-flex-center">\n                            \n                              <div class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon" @click="theme.showInfo = !theme.showInfo">lightbulb</div>\n                              <div class="uip-flex-grow uip-text-bold">{{theme.name}}</div>\n                              \n                              <div v-if="theme.images.length > 1" class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="navImagesBackward(theme)">chevron_left</div>\n                              <div v-if="theme.images.length > 1" class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="navImagesForward(theme)">chevron_right</div>\n                              \n                              <div class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l" @click="importThis(theme)">download</div>\n                            </div>\n                            \n                            <template v-if="theme.showInfo">\n                            \n                              <div class="uip-text-muted" style="line-height:1.6">\n                                {{theme.description}}\n                              </div>\n                              \n                              <div class="uip-flex uip-flex-gap-xs uip-flex-between">\n                                \n                                <div class="uip-text-xs uip-background-primary-wash uip-border-rounder uip-padding-left-xxxs uip-padding-right-xxxs uip-flex uip-flex-row uip-gap-xxs uip-flex-center">\n                                  <span class="uip-icon">file_download</span>\n                                  <span>{{theme.downloads}}</span>\n                                </div>\n                                \n                                <div class="uip-text-muted uip-text-s">\n                                  {{strings.createdBy}} <a href="https://uipress.co" class="uip-link-default">{{theme.created_by}}</a>\n                                </div>\n                                \n                              </div>\n                            \n                            </template>\n                          \n                          \n                        </div>\n                      </div>\n                    \n                  </template>\n                \n                </uip-draggable>\n                \n              </template>\n            \n            </screenOverlay>\n            \n            \n            \n            <div class="uip-border-top uip-margin-top-s uip-margin-bottom-s"></div>\n            \n            \n            \n            \n            \x3c!--Patterns--\x3e\n            <screenOverlay class="uip-w-100p">\n            \n              <template v-slot:trigger>\n                <div class="uip-flex uip-gap-s uip-padding-xxs hover:uip-background-muted uip-border-rounder uip-flex-center">\n                \n                    <div class="uip-icon uip-text-xl uip-background-muted uip-border-rounder uip-padding-xxs">\n                      texture\n                    </div>   \n                    <div class="uip-text-emphasis uip-flex-grow">{{strings.patterns}}</div>             \n                    \n                    <div class="uip-icon uip-text-l">chevron_right</div>\n                </div>\n              </template>\n              \n              <template v-slot:content>\n              \n                <p v-if="uiTemplate.patterns.length < 1" class="uip-padding-m uip-text-muted uip-text-center">No patterns created yet</p>\n                \n                <uip-draggable \n                :list="uiTemplate.patterns" \n                class="uip-padding-s uip-flex uip-flex-column uip-row-gap-s"\n                handle=".uip-block-drag"\n                :group="{ name: \'uip-blocks\', pull: \'clone\', put: false, revertClone: true }"\n                animation="300"\n                :sort="false"\n                :clone="clonePattern"\n                itemKey="name"\n                >\n                  <template v-for="(theme, index) in uiTemplate.patterns" :key="theme.id" :index="index">\n                      \n                        <div class="uip-flex uip-flex-column uip-block-drag uip-row-gap-xs">\n                        \n                            <div class="uip-flex uip-gap-xs uip-flex-center hover:uip-background-grey uip-padding-xxs uip-border-rounder uip-cursor-pointer" @dblclick="importThisPattern(theme)">\n                            \n                              <div class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-l">{{returnIcon(theme)}}</div>\n                              <div class="uip-flex-grow uip-text-bold">{{theme.name}}</div>\n                              \n                              <div v-if="!theme.editing" class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon" @click="theme.editing = true">edit</div>\n                              <div v-if="theme.editing" class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon uip-text-green" @click="theme.editing = false">done</div>\n                              \n                              <div class="uip-button-default uip-icon uip-border-rounder uip-padding-xxs uip-link-muted uip-icon" @click="deleteThisItem(theme.id)">delete</div>\n                            </div>\n                            \n                            <div v-if="theme.editing" class="uip-grid-col-1-3 uip-padding-s uip-padding-right-remove">\n                              \n                              \x3c!--Name --\x3e\n                              <div class="uip-flex uip-flex-center">\n                                <div class="uip-text-s uip-text-muted">{{strings.patternTitle}}</div>\n                              </div>\n                              <div class="uip-flex uip-flex-center">\n                                <input class="uip-input uip-input-small uip-w-100p" type="text" v-model="theme.name">\n                              </div>\n                              \n                              \x3c!--Icon--\x3e\n                              <div class="uip-flex uip-flex-center">\n                                <div class="uip-text-s uip-text-muted">{{strings.patternIcon}}</div>\n                              </div>\n                              <div class="uip-flex uip-flex-center">\n                                <icon-select :value="{value: theme.icon}" :returnData="function(data) {theme.icon = data.value}"/>\n                              </div>\n                              \n                              \x3c!--Description--\x3e\n                              <div class="uip-flex uip-flex-center">\n                                <div class="uip-text-s uip-text-muted">{{strings.description}}</div>\n                              </div>\n                              <div class="uip-flex uip-flex-center">\n                                <textarea class="uip-input uip-w-100p" rows="4" v-model="theme.description"></textarea>\n                              </div>\n                              \n                              \x3c!--Description--\x3e\n                              <div class="uip-flex uip-flex-center">\n                                <div class="uip-text-s uip-text-muted">{{strings.patternType}}</div>\n                              </div>\n                              <div class="uip-flex uip-flex-center">\n                                <toggle-switch :options="patternTypes" :activeValue="theme.type" :returnValue="function(data){ theme.type = data}"></toggle-switch>\n                              </div>\n                              \n                            \n                            </div>\n                            \n                        </div>\n                    \n                  </template>\n                \n                </uip-draggable>\n                \n              </template>\n            \n            </screenOverlay>\n            \n            \n            \n          \n        </div>\n        \n        <Confirm ref="confirm"/>\n      </div>'};