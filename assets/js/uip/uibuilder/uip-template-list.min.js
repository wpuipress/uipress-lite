const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export default{data:()=>({templates:[],page:1,totalPages:0,totalFound:0,loading:!1,initialLoading:!0,selectAll:!1,showWelcome:!0,search:"",strings:{status:__("Status","uipress-lite"),forRoles:__("Roles and users","uipress-lite"),excludes:__("Excludes","uipress-lite"),modified:__("Modified","uipress-lite"),name:__("Name","uipress-lite"),type:__("Type","uipress-lite"),active:__("Active","uipress-lite"),draft:__("Draft","uipress-lite"),results:__("results","uipress-lite"),searchTemplates:__("Search templates...","uipress-lite"),templateDuplicated:__("Template duplicated","uipress-lite"),templateDeleted:__("Template deleted","uipress-lite"),deleteSelected:__("Delete selected","uipress-lite"),uiBuilder:__("uiBuilder","uipress-lite"),newTemplate:__("New template","uipress-lite"),welcomeTotheUibuilder:__("It's a little quiet!","uipress-lite"),welcomeMeta:__("Create a new template to get started with uiBuilder or check out the docs","uipress-lite"),viewDocs:__("View docs","uipress-lite"),editTemplate:__("Edit template","uipress-lite"),duplicateTemplate:__("Duplicate template","uipress-lite"),deleteTemplate:__("Delete template","uipress-lite"),version:__("version","uipress-lite"),tools:__("Tools","uipress-lite"),settings:__("Site settings","uipress-lite"),phpErrorLog:__("PHP error log","uipress-lite"),roleEditor:__("Role editor","uipress-lite"),pro:__("pro","uipress-lite"),uiTemplate:__("UI template","uipress-lite"),uiTemplates:__("UI templates","uipress-lite"),adminPage:__("Admin page","uipress-lite"),loginPage:__("Login page","uipress-lite"),frontEndToolbar:__("Frontend toolbar","uipress-lite"),setupWizard:__("Setup wizard","uipress-lite"),globalExport:__("Global export","uipress-lite"),templateType:__("New template","uipress-lite"),userInterface:__("User interface","uipress-lite"),edit:__("Edit","uipress-lite"),duplicate:__("Duplicate","uipress-lite"),noTemplatesYet:__("No templates yet!","uipress-lite"),welcomeTov32:__("Welcome to version 3.2!","uipress-lite"),globalImport:__("Global import","uipress-lite"),siteSync:__("Remote sync","uipress-lite")},activeTableTab:"all",tabletabs:[{name:"all",label:__("All templates","uipress-lite")},{name:"active",label:__("Active","uipress-lite")},{name:"drafts",label:__("Drafts","uipress-lite")},{name:"templates",label:__("UI Templates","uipress-lite")},{name:"pages",label:__("Admin pages","uipress-lite")},{name:"toolbar",label:__("Frontend toolbars","uipress-lite")}],tabbedTemplateTypes:{all:{value:"all",label:__("All","uipress-lite")},templates:{value:"templates",label:__("UI Templates","uipress-lite")},pages:{value:"pages",label:__("Admin pages","uipress-lite")},toolbar:{value:"toolbar",label:__("Toolbars","uipress-lite")}},activeSwitchOptions:{draft:{value:"draft",label:__("Draft","uipress-lite")},publish:{value:"publish",label:__("Active","uipress-lite")}},templateTypes:{templates:{value:"ui-template",label:__("UI Templates","uipress-lite"),icon:"space_dashboard"},pages:{value:"ui-admin-page",label:__("Admin pages","uipress-lite"),icon:"article"},toolbar:{value:"ui-front-template",label:__("Toolbars","uipress-lite"),icon:"build"}}}),inject:["uipData","router","uipress","uipMediaLibrary"],mounted:function(){let e=this.$route.query;e&&(e.page&&(this.page=parseInt(e.page)),e.search&&(this.search=e.search)),this.getTemplates(),this.enqueueAdminBarStyles(),this.uipData.userPrefs.supressWelcome&&(this.showWelcome=!1),window.parent&&window.parent.postMessage({eventName:"uip_exit_fullscreen"},"*")},watch:{search:{handler(e,i){this.page=1,this.pushQueries(),this.getTemplates()},deep:!0},selectAll:{handler(e,i){this.selectAllItems(e)},deep:!0},activeTableTab:{handler(e,i){this.getTemplates()}}},computed:{returnTableData(){return this.templates.sort((e,i)=>i.status.localeCompare(e.status)),this.templates},toggleSelect(){return this.templates},returnPage(){return this.page},returnSelected(){let e=this,i=0;for(const t of e.templates)t.selected&&(i+=1);return i},returnSelectedIDs(){let e=this,i=[];for(const t of e.templates)t.selected&&i.push(t.id);return JSON.stringify(i)}},methods:{enqueueAdminBarStyles(){let e=document.querySelector('link[href*="load-styles.php?"]');if(e){if(document.documentElement.hasAttribute("uip-core-app"))return;let i=e.href;i.includes("admin-bar,")||(i=e.href.replace("admin-menu,","admin-menu,admin-bar,"),e.href=i)}},selectAllItems(e){let i=this;for(const t of i.templates)t.selected=e},pushQueries(){this.$router.push({query:{search:this.search,page:this.page}})},getTemplates(){let e=this;if(1==e.loading)return;e.loading=!0;let i=new FormData;i.append("action","uip_get_ui_templates"),i.append("security",uip_ajax.security),i.append("page",e.returnPage),i.append("search",e.search),i.append("filter",e.activeTableTab),e.uipress.callServer(uip_ajax.ajax_url,i).then(i=>{e.templates=i.templates,e.totalPages=i.totalPages,e.totalFound=i.totalFound,e.loading=!1,e.initialLoading=!1})},duplicateTemplate(e){let i=this,t=new FormData;t.append("action","uip_duplicate_ui_template"),t.append("security",uip_ajax.security),t.append("id",e),i.uipress.callServer(uip_ajax.ajax_url,t).then(e=>{e.error?i.uipress.notify(e.message,"","error",!0):(i.uipress.notify(i.strings.templateDuplicated,"","success",!0),i.getTemplates())})},deleteTemplate(e){let i=this,t=new FormData;t.append("action","uip_delete_ui_template"),t.append("security",uip_ajax.security),t.append("templateids",e),i.uipress.callServer(uip_ajax.ajax_url,t).then(t=>{if(t.error)return void i.uipress.notify(t.message,"","error",!0);i.uipress.notify(t.message,"","success",!0);let n=i.templates.findIndex(i=>i.id===e);-1!==n&&i.templates.splice(n,1)})},createNewUI(e){let i=this,t=new FormData;t.append("action","uip_create_new_ui_template"),t.append("security",uip_ajax.security),t.append("templateType",e),i.uipress.callServer(uip_ajax.ajax_url,t).then(e=>{i.router.push("/uibuilder/"+e.id+"/")})},confirmDelete(e){let i=this;i.uipress.confirm(__("Are you sure you want to delete this template?","uipress-lite"),__("Deleted templates can't be recovered","uipress-lite"),__("Delete","uipress-lite")).then(t=>{t&&i.deleteTemplate(e)})},confirmDeleteMultiple(e){let i=this;i.uipress.confirm(__("Are you sure you want to multiple templates?","uipress-lite"),__("Deleted templates can't be recovered","uipress-lite"),__("Delete","uipress-lite")).then(t=>{t&&i.deleteTemplate(e)})},editLayout(e){this.router.push("/uibuilder/"+e+"/")},goBack(){this.page>1&&(this.page=this.page-1,this.pushQueries(),this.getTemplates())},goForward(){this.page<this.totalPages&&(this.page=this.page+1,this.pushQueries(),this.getTemplates())},componentExists(e){return!!this.$root._.appContext.components[e]},generateVal:e=>"publish"==e,updateItemStatus(e){let i=this,t=new FormData;t.append("action","uip_update_ui_template_status"),t.append("security",uip_ajax.security),t.append("templateid",e.id),t.append("status",e.status),i.uipress.callServer(uip_ajax.ajax_url,t).then(e=>{e.error?i.uipress.notify(e.message,"","error",!0):i.uipress.notify(e.message,"","success",!0)})}},template:'\n    \n    \n  <div class="uip-padding-m uip-background-default uip-body-font uip-text-normal uip-app-frame uip-border-box uip-overflow-auto" style="min-height: calc(100vh - 32px); max-height: calc(100vh - 32px)">\n\t\t<div class="uip-flex uip-flex-between uip-margin-bottom-m uip-flex-center">\n      <div class="uip-flex uip-flex-row uip-gap-xs uip-flex-center">\n      \n        <div class="uip-dark-mode uip-padding-xxs uip-border-rounder" style="background:#222">\n          <div class="uip-w-32 uip-ratio-1-1 uip-logo"></div>\n        </div>\n        \n\t\t\t  <div class="uip-flex uip-flex-column uip-row-gap-xxs">\n        \n          <span class="uip-text-xl uip-text-bold uip-text-emphasis">{{strings.uiBuilder}}</span>\n          <span class="uip-text-xs uip-text-muted">{{strings.version}} {{uipData.options.uipVersion}}</span>\n        \n        </div>\n      </div>\n      \n      <div class="uip-flex uip-flex-row uip-gap-xs uip-flex-center">\n        \n        \n        <router-view :key="$route.path"></router-view>\n      \n        <dropdown pos="bottom right">\n          <template v-slot:trigger>\n\t\t\t      <div class="uip-button-default uip-flex uip-flex-row uip-gap-xxs uip-flex-center">\n              <span class="uip-icon">build</span>\n              <span>{{strings.tools}}</span>\n            </div>\n          </template>\n          <template v-slot:content>\n            <div class="uip-flex uip-flex-column uip-padding-xs uip-min-w-150 uip-row-gap-xxxs">\n            \n              \x3c!-- ERROR LOG --\x3e \n              <uip-offcanvas position="right" style="max-width:90%;width:500px">\n                <template v-slot:trigger>\n                  <div class="uip-flex uip-gap-m uip-flex-between uip-link-default uip-flex-center uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-round">\n                    \n                    <div class="">{{strings.phpErrorLog}}</div>\n                    <div class="uip-icon uip-text-l">code</div>\n                  </div>\n                </template>\n                <template v-slot:content>\n                  <div class="uip-w-100p">\n                    <uip-error-log></uip-error-log>\n                  </div>\n                </template>\n              </uip-offcanvas>\n              \n              \n              <router-link to="/setupwizard/" class="uip-flex uip-gap-m uip-flex-between uip-link-default uip-no-underline uip-flex-center uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-round">\n                \n                <div class="">{{strings.setupWizard}}</div>\n                <div class="uip-icon uip-text-l">magic_button</div>\n                \n              </router-link>\n              \n              <div class="uip-border-top uip-margin-top-xs uip-margin-bottom-xs"></div>\n              \n              <router-link to="/globalexport/" class="uip-flex uip-gap-m uip-flex-between uip-link-default uip-no-underline uip-flex-center uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-round">\n                \n                <div class="">{{strings.globalExport}}</div>\n                <div class="uip-icon uip-text-l">file_download</div>\n                \n              </router-link>\n              \n              <router-link to="/globalimport/" class="uip-flex uip-gap-m uip-flex-between uip-link-default uip-no-underline uip-flex-center uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-round">\n                \n                <div class="">{{strings.globalImport}}</div>\n                <div class="uip-icon uip-text-l">file_upload</div>\n                \n              </router-link>\n              \n              \n              <router-link to="/sitesync/" class="uip-flex uip-gap-m uip-flex-between uip-link-default uip-no-underline uip-flex-center uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-round">\n                \n                <div class="">{{strings.siteSync}}</div>\n                <div class="uip-icon uip-text-l">sync</div>\n                \n              </router-link>\n              \n              \n              \n              \n            </div>\n          </template>\n        </dropdown>\n        \n        <router-link to="/site-settings/" class="uip-button-default uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-no-underline">\n          <span class="uip-icon">tune</span>\n          <span>{{strings.settings}}</span>\n        </router-link>\n\n      \n      </div>\n\t\t</div>\n    \n    \n    \x3c!--LIST--\x3e\n    \n    <div class="uip-margin-bottom-m uip-padding-s uip-border-rounder uip-background-orange-wash" v-if="showWelcome">\n      \n      <div class="uip-text-bold uip-margin-bottom-s uip-flex uip-flex-between">\n        <div>{{strings.welcomeTov32}}</div>\n        <div @click="showWelcome = false;uipress.saveUserPreference(\'supressWelcome\', true, false);"\n        class="uip-padding-xxs uip-border-rounder hover:uip-background-grey uip-cursor-pointer"><span class="uip-icon">close</span></div>\n      </div>\n      \n      <div class="uip-text-muted uip-margin-bottom-s">\n        <p>This update brings a refinded builder experience with plenty of new features, performance improvements and an improved user interface. </p>\n        \n        <p>If you have just updated from an earlier version we suggest clearing browser cache before entering the builder. If you are new to uiPress then you can check out our brand new, in depth documentation below.</p>\n      </div>\n      \n      <div class="uip-flex">\n        <a href="https://uipress.co/docs/#/"\n        target="_BLANK" class="uip-link-default uip-no-underline uip-flex uip-flex-row uip-gap-xxs uip-flex-center">\n          <span class="uip-text-bold">{{strings.viewDocs}}</span>\n          <span class="uip-icon">arrow_forward</span>\n        </a>\n      </div>\n    </div>\n    \n    <div class="uip-margin-bottom-m uip-flex uip-flex-between uip-flex-center">\n    \n      <div class="uip-flex uip-flex-row uip-gap-s">\n        \n        <div class="uip-flex uip-padding-xxs uip-search-block uip-border-rounder uip-background-muted uip-gap-xxs uip-flex-center uip-w-250">\n            <span class="uip-icon uip-text-muted uip-text-l">search</span> \n            <input class="uip-blank-input uip-flex-grow" type="search" v-model="search" :placeholder="strings.searchTemplates">\n        </div>\n         \n         <div v-if="returnSelected > 0">\n             <button @click="confirmDeleteMultiple(returnSelectedIDs)" class="uip-button-danger" >{{strings.deleteSelected}} <strong> ({{returnSelected}}) </strong></button>\n         </div>\n         \n      </div>\n       \n      <div class="uip-flex uip-flex-row uip-gap-s uip-flex-center">\n       \n        <div class="uip-button-primary uip-flex uip-flex-row uip-gap-xxs uip-flex-center" @click="createNewUI(\'ui-template\')">\n          <span class="uip-icon">add</span>\n          <span>{{strings.newTemplate}}</span>\n        </div>\n         \n      </div>\n       \n    </div>\n    \n    <div v-if="loading && !initialLoading" class="uip-position-relative" style="top:-18px">\n      <div class="uip-ajax-loader">\n        <div class="uip-loader-bar"></div>\n      </div>\n    </div>\n  \n    \x3c!--Ui Templates--\x3e\n    <div class="uip-flex uip-flex-column uip-row-gap-m uip-margin-bottom-l">\n      <template v-for="templateType in templateTypes">\n      \n        <div class="uip-flex uip-flex-column uip-row-gap-s">\n          <div class="uip-text-bold">\n            {{templateType.label}}\n          </div>\n          \n          <div class="uip-flex uip-gap-s uip-row-gap-s uip-flex-wrap">\n            \n            <div v-if="initialLoading" class="uip-w-150 uip-flex uip-flex-center uip-flex-middle">\n              <loading-chart></loading-chart>\n            </div>\n            \n            \n            \n            \x3c!--Empty --\x3e\n            <template v-else-if="templateType.value  == \'ui-template\' && returnTableData.length == 0 && !loading && search == \'\'">\n            \n              <div class="uip-background-green-wash uip-border-rounder uip-overflow-hidden uip-w-200 uip-min-w-150 hover:uip-shadow uip-transition-all uip-fade-in">\n                \n                <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-s">\n                \n                  <div class="uip-flex uip-flex-between uip-gap-s uip-flex-center">\n                    <div class="uip-text-bold uip-link-default uip-no-underline">{{strings.noTemplatesYet}}</div>\n                  </div>  \n                  \n                  <div class="uip-flex uip-flex-wrap uip-gap-xxs uip-max-w-100p">\n                    <div class="uip-text-muted">{{strings.welcomeMeta}}</div>\n                  </div>\n                  \n                  <div class="uip-flex uip-row-gap-xxs uip-flex-column">\n                  \n                    <router-link to="/setupwizard/" class="uip-link-default uip-no-underline uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-flex-between uip-w-100p">\n                      \n                      <span>{{strings.setupWizard}}</span>\n                      <span class="uip-icon">magic_button</span>\n                      \n                    </router-link>\n                    \n                    <div @click="createNewUI(\'ui-template\')" class="uip-link-default uip-no-underline uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-flex-between uip-w-100p">\n                      \n                      <span>{{strings.newTemplate}}</span>\n                      <span class="uip-icon">add</span>\n                      \n                    </div>\n                    \n                    <a href="https://uipress.co/docs/#/"\n                    target="_BLANK" class="uip-link-default uip-no-underline uip-flex uip-flex-row uip-gap-xxs uip-flex-center uip-flex-between uip-w-100p">\n                      <span class="uip-text-bold">{{strings.viewDocs}}</span>\n                      <span class="uip-icon">arrow_forward</span>\n                    </a>\n                    \n                  </div>\n                  \n                </div>\n                \n              </div>\n              \n              <div @click="createNewUI(\'ui-template\')" class="uip-cursor-pointer uip-background-muted uip-border-rounder uip-overflow-hidden uip-w-200 uip-min-w-150 hover:uip-shadow uip-transition-all uip-fade-in uip-padding-s uip-flex uip-flex-center uip-flex-middle">\n              \n                <span class="uip-icon uip-text-xxl">add</span>\n                \n              </div>\n            \n            </template>\n            \n            <component is="style">\n              .templates-move, \n              .templates-enter-active,\n              .templates-leave-active {\n                transition: all 0.5s ease;\n              }\n              \n              .templates-enter-from,\n              .templates-leave-to {\n                opacity: 0;\n                transform: translateX(30px);\n              }\n              \n              .templates-leave-active {\n                position: absolute;\n              }\n            </component>\n          \n            <TransitionGroup name="templates">\n\n              <template v-if="!initialLoading" v-for="(item, index) in returnTableData">\n                \n              \n                <div :key="templateType.value + index" v-if="item.actualType == templateType.value" class="uip-background-muted uip-border-rounder uip-overflow-hidden uip-w-200 uip-min-w-150 hover:uip-shadow uip-transition-all uip-fade-in">\n                  <div class="uip-padding-s uip-background-grey uip-flex uip-flex-center uip-flex-middle">\n                    <span class="uip-icon uip-text-xl">{{templateType.icon}}</span>\n                  </div>\n                  <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-xxs">\n                  \n                    <div class="uip-flex uip-flex-between uip-gap-s uip-flex-center">\n                      <router-link :to="\'/uibuilder/\' + item.id + \'/\'" class="uip-text-bold uip-link-default uip-no-underline">{{item.name}}</router-link>\n                      \n                      <dropdown pos="bottom right">\n                      \n                        <template v-slot:trigger>\n                          <div class="uip-icon uip-padding-xxs hover:uip-background-grey uip-border-rounder">more_vert</div>\n                        </template>\n                        \n                        <template v-slot:content>\n                          <div class="uip-padding-xs">\n                          \n                            <div class="uip-flex uip-flex-column">\n                            \n                              <switch-select :args="{asText:true, small:true, options: activeSwitchOptions}" :value="item.status" :returnData="function(d){item.status = d;updateItemStatus(item)}"></switch-select>\n                              \n                            </div>  \n                            <div class="uip-border-bottom uip-margin-top-xs uip-margin-bottom-xs"></div>\n                            <div class="uip-flex uip-flex-column">\n                            \n                              \x3c!--Edit--\x3e\n                              <router-link :to="\'/uibuilder/\' + item.id + \'/\'" class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-link-default uip-no-underline uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-rounder uip-flex-reverse uip-gap-m uip-flex-between">\n                                <div class="uip-icon">edit</div>\n                                <div class="">{{strings.edit}}</div>\n                              </router-link>\n                              \n                              \x3c!--Duplicate--\x3e\n                              <div @click="duplicateTemplate(item.id)" class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-link-default uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-rounder uip-flex-reverse uip-gap-m uip-flex-between">\n                                <div class="uip-icon">content_copy</div>\n                                <div class="">{{strings.duplicate}}</div>\n                              </div>\n                              \n                            </div>\n                            <div class="uip-border-bottom uip-margin-top-xs uip-margin-bottom-xs"></div>\n                            <div class="uip-flex uip-flex-column">\n                              <div @click="confirmDelete(item.id)" class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-link-danger uip-padding-xxxs uip-padding-left-xxs uip-padding-right-xxs hover:uip-background-muted uip-border-rounder uip-flex-reverse uip-gap-m uip-flex-between">\n                                <div class="uip-icon">delete</div>\n                                <div class="">Delete</div>\n                              </div>\n                            </div>\n                          </div>\n                        </template>\n                        \n                      </dropdown>\n                      \n                    </div>  \n                    \n                    <div v-if="item.status == \'publish\'" class="uip-flex uip-gap-xs uip-flex-center">\n                      <div class="uip-w-8 uip-ratio-1-1 uip-border-circle uip-background-green-wash" style="border:1px solid var(--uip-color-green)"></div>\n                      <div class="uip-text-green">{{strings.active}}</div>\n                    </div>\n                    \n                    <div v-if="item.status == \'draft\'" class="uip-flex uip-gap-xs uip-flex-center">\n                      <div class="uip-w-8 uip-ratio-1-1 uip-border-circle uip-background-orange-wash" style="border:1px solid var(--uip-color-orange)"></div>\n                      <div class="uip-text-orange">{{strings.draft}}</div>\n                    </div>\n                    \n                    <div class="uip-flex uip-flex-wrap uip-gap-xxs uip-max-w-100p uip-margin-top-xxs" v-if="item.for.length > 0">\n                      <template v-for="user in item.for">\n                        <div class="uip-padding-left-xxs uip-padding-right-xxs uip-background-primary-wash uip-border-rounder uip-text-xs">{{user.name}}</div>\n                      </template>\n                    </div>\n                    \n                  </div>\n                </div>\n              </template>\n              \n            </TransitionGroup>\n          </div>\n        </div>\n        \n      </template>\n    </div>\n      \n      \n      \n      \n     \n      \n\t</div>'};