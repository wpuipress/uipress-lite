export default{data:()=>({mountedFonts:[]}),computed:{},methods:{returnBlockStylesAsCss(t){const e=this.returnBlockParts(t);if(!e.length)return;let s=`#${t.uid}`,i="",n="",o="",a="";for(let t of e){let e=t.class?`${s} ${t.class}`:s;e=e.startsWith(":")?`${s}${e}`:e;const r="}";let{substyle:h,formattedPseudo:l}=this.processBlockPartStyleSection(t,"value");n+=l.length?this.handleParsedPseudos(l,s,e,r):"",i+=h?`${e} { ${h} }`:"";let{substyle:u,formattedPseudo:d}=this.processBlockPartStyleSection(t,"darkValue");a+=d.length?this.handleParsedPseudos(d,s,`[data-theme="dark"] ${e}`,r):"",o+=u?`[data-theme="dark"] ${e} { ${u} }`:""}let r=i.trim()?i:"";r+=n.trim()?n:"";let h=o.trim()?o:"";return r+(h+=a.trim()?a:"")},handleParsedPseudos(t,e,s,i){if(!Array.isArray(t))return"";let n="",o="",a=[{key:":menu-collapsed",selector:'html[uip-menu-collapsed="true"]'},{key:"tablet",selector:".uip-tablet-view"},{key:"mobile",selector:".uip-phone-view"}];for(let e of t){if("default"===e.key)continue;const t=a.find(t=>t.key===e.key);if(t){const i=s.startsWith('[data-theme="dark"]')?"":" ";o+=e.style.trim()?`${t.selector}${i}${s} {  ${e.style}  }`:"";continue}const i=":active"===e.key?`${s}${e.key}, ${s}[active="true"]`:`${s}${e.key}`;n+=e.style?`${i} { ${e.style} }`:""}let r=n.trim()?n:"";return r+=o.trim()?o:""},returnBlockParts(t){const{moduleName:e,settings:s}=t,i=this.uipApp.data.blocks;if(!this.isObject(s))return[];const n=i.find(t=>t.moduleName===e);if(!n||!n.optionsEnabled)return[];const o=new Set(["advanced","block"]);return n.optionsEnabled.filter(t=>!o.has(t.name)).filter(t=>t.name in s&&s[t.name].options).map(t=>({...t,styleSettings:s[t.name].options,beforeContent:s[t.name].beforeContent,afterContent:s[t.name].afterContent}))},processBlockPartStyleSection(t,e){let s="",i="",n=[];const o=t.styleSettings;if(!this.isObject(o))return s;const a=t.afterContent?t.afterContent:"",r=t.beforeContent?t.beforeContent:"";return s+=this.isObject(o.flexLayout)?this.processLayoutStyle(o.flexLayout,e):"",n=(i=this.hasNestedPath(o,"flexLayout","pseudo")?this.handlePseudoStyle(o.flexLayout.pseudo,this.processLayoutStyle,e,r,a):"").length?[...n,...i]:n,s+=this.isObject(o.dimensions)?this.processDimensionsStyle(o.dimensions,e):"",n=(i=this.hasNestedPath(o,"dimensions","pseudo")?this.handlePseudoStyle(o.dimensions.pseudo,this.processDimensionsStyle,e,r,a):"").length?[...n,...i]:n,s+=this.isObject(o.styles)?this.processStylesStyle(o.styles,e):"",n=(i=this.hasNestedPath(o,"styles","pseudo")?this.handlePseudoStyle(o.styles.pseudo,this.processStylesStyle,e,r,a):"").length?[...n,...i]:n,s+=this.isObject(o.spacing)?this.processSpacingStyle(o.spacing,e):"",n=(i=this.hasNestedPath(o,"spacing","pseudo")?this.handlePseudoStyle(o.spacing.pseudo,this.processSpacingStyle,e,r,a):"").length?[...n,...i]:n,s+=this.isObject(o.textFormat)?this.processTextStyle(o.textFormat,e):"",n=(i=this.hasNestedPath(o,"textFormat","pseudo")?this.handlePseudoStyle(o.textFormat.pseudo,this.processTextStyle,e,r,a):"").length?[...n,...i]:n,s+=this.isObject(o.positionDesigner)?this.processPositionStyle(o.positionDesigner,e):"",n=(i=this.hasNestedPath(o,"positionDesigner","pseudo")?this.handlePseudoStyle(o.positionDesigner.pseudo,this.processPositionStyle,e,r,a):"").length?[...n,...i]:n,{substyle:s+=this.isObject(o.effectsDesigner)?this.processEffectsStyle(o.effectsDesigner,e):"",formattedPseudo:n=(i=this.hasNestedPath(o,"effectsDesigner","pseudo")?this.handlePseudoStyle(o.effectsDesigner.pseudo,this.processEffectsStyle,e,r,a):"").length?[...n,...i]:n}},handlePseudoStyle(t,e,s,i,n){const o="value"==s?"light":"dark";if(!(o in t))return[];let a=[];if(this.isObject(t[o]))for(const s in t[o]){let r=e({value:t[o][s]},"value");r+="::before"==s?`content:"${i}";`:"",r+="::after"==s?`content:"${n}";`:"",a.push({key:s,style:r})}return a},processEffectsStyle(t,e){if(!this.isObject(t[e]))return"";const s=t[e];let i="",n="",o="";const a=this.hasNestedPath(s,"transform","translateX","value"),r=this.hasNestedPath(s,"transform","translateX","units");n+=a&&r?`translateX(${a}${r}) `:"";let h=this.hasNestedPath(s,"transform","translateY","value"),l=this.hasNestedPath(s,"transform","translateY","units");n+=h&&l?`translateY(${h}${r}) `:"";let u=this.hasNestedPath(s,"transform","scaleX");n+=u?`scaleX(${u}) `:"";let d=this.hasNestedPath(s,"transform","scaleY");n+=d?`scaleY(${d}) `:"";let c=this.hasNestedPath(s,"transform","rotateX");n+=c?`rotateX(${c}deg) `:"";let f=this.hasNestedPath(s,"transform","rotateY");n+=f?`rotateY(${f}deg) `:"";let p=this.hasNestedPath(s,"transform","rotateZ");n+=p?`rotateZ(${p}deg) `:"";let m=this.hasNestedPath(s,"transform","skewX");n+=m?`skewX(${m}deg) `:"";let g=this.hasNestedPath(s,"transform","skewY");i+=(n+=g?`skewY(${g}deg) `:"")?`transform:${n};`:"";let $=this.hasNestedPath(s,"filters","mixBlendMode");i+=$?`mix-blend-mode:${$};`:"";let y=this.hasNestedPath(s,"filters","grayscale");o+=y?`grayscale(${y}) `:"";let b=this.hasNestedPath(s,"filters","blur");o+=b?`blur(${b}px) `:"";let v=this.hasNestedPath(s,"filters","saturate");o+=v?`saturate(${v}) `:"";let P=this.hasNestedPath(s,"filters","contrast");o+=P?`contrast(${P}) `:"";let x=this.hasNestedPath(s,"filters","backdropBlur");i+=x?`backdrop-filter:blur(${x}px);`:"",i+=o?`filter:${o};`:"";let S=this.hasNestedPath(s,"transitionType"),N=this.hasNestedPath(s,"transitionTime"),k=this.hasNestedPath(s,"transitionDelay"),w=this.hasNestedPath(s,"cursor");return i+=S&&!this.isUnDefined(N)?`transition:all ${S} ${N}s;`:"",i+=k?`transition-delay: ${k}s;`:"",i+=w?`cursor: ${w};`:""},processPositionStyle(t,e){if(!this.isObject(t[e]))return"";const s=t[e];let i="";i+=s.position?`position:${s.position};`:"",i+=s.display?`display:${s.display};`:"",i+=this.isUnDefined(s.zIndex)?"":`z-index:${s.zIndex};`;const n=this.hasNestedPath(s,"offset","units");return n&&(i+=this.isUnDefined(s.offset.left)?"":`left:${s.offset.left}${n};`,i+=this.isUnDefined(s.offset.top)?"":`top:${s.offset.top}${n};`,i+=this.isUnDefined(s.offset.right)?"":`right:${s.offset.right}${n};`,i+=this.isUnDefined(s.offset.bottom)?"":`bottom:${s.offset.bottom}${n};`),i+="top"==s.verticalAlign?"margin-bottom: auto;":"",i+="bottom"==s.verticalAlign?"margin-top: auto;":"",i+="center"==s.verticalAlign?"margin-top: auto;margin-bottom: auto;":"",i+="left"==s.horizontalAlign?"margin-right: auto;":"",i+="right"==s.horizontalAlign?"margin-left:auto;align-self: flex-end;":"",i+="center"==s.horizontalAlign?"margin-right:auto;margin-left:auto;align-self: center;":""},processTextStyle(t,e){if(!this.isObject(t[e]))return"";const s=t[e];let i=this.hasNestedPath(s,"size","preset");const n=this.hasNestedPath(s,"size","value"),o=this.hasNestedPath(s,"lineHeight","value"),a=this.hasNestedPath(s,"spacing","value");let r="";if(i&&"custom"!=i&&(r+="XS"==(i=i.toUpperCase())?"font-size: var(--uip-text-xs);":"",r+="SMALL"==i||"S"==i?"font-size: var(--uip-text-s);":"",r+="MEDIUM"==i||"M"==i?"font-size: var(--uip-text-m);":"",r+="LARGE"==i||"L"==i?"font-size: var(--uip-text-l);":"",r+="XL"==i?"font-size: var(--uip-text-xl);":""),"custom"==i&&n&&(r+=s.size.units?`font-size:${n}${s.size.units};`:""),o&&(r+=s.lineHeight.units?`line-height:${o}${s.lineHeight.units};`:""),a&&(r+=s.spacing.units?`letter-spacing:${a}${s.spacing.units};`:""),r+=s.align?`text-align: ${s.align};`:"",r+=s.bold?"font-weight: bold;":"",r+=s.italic||"italic"==s.decoration?"font-style: italic;":"",r+=s.underline||"underline"==s.decoration?"text-decoration: underline;":"",r+=s.strikethrough||"strikethrough"==s.decoration?"text-decoration: strikethrough;":"",r+=this.isUnDefined(s.weight)?"":`font-weight: ${s.weight};`,r+=s.transform?`text-transform: ${s.transform};`:"",this.isObject(s.color)&&(r+=s.color.value?`color: ${this.handleColorOutput(s.color.value)};`:""),r+=s.font&&"custom"!=s.font?`font-family: ${s.font};`:"",r+=s.customName&&"custom"==s.font?`font-family: ${s.customName};`:"",!this.mountedFonts.includes(s.customURL)&&s.customURL){const t=document.createElement("style");t.textContent=`@import url('${s.customURL}');`,document.head.appendChild(t),this.mountedFonts.push(s.customURL)}return r},processSpacingStyle(t,e){if(!this.isObject(t[e]))return"";const s=t[e];let i="";const n=s.padding,o=s.margin;if(!n&&!o)return i;const a=(t,e)=>{let s="";const i=t.preset;return i&&"custom"!==i?(s+="0"==i?`${e}: 0;`:"",s+="XS"==i?`${e}: var(--uip-${e}-xxs);`:"",s+="S"==i?`${e}: var(--uip-${e}-xs);`:"",s+="M"==i?`${e}: var(--uip-${e}-s);`:"",s+="L"==i?`${e}: var(--uip-${e}-m);`:"",s+="XL"==i?`${e}: var(--uip-${e}-l);`:""):"custom"==i&&t.sync?s=!this.isUnDefined(t.left)&&t.units?`${e}:${t.left}${t.units};`:"":"custom"!=i||t.sync?void 0:t.units?(s+=this.isUnDefined(t.left)?"":`${e}-left:${t.left}${t.units};`,s+=this.isUnDefined(t.top)?"":`${e}-top:${t.top}${t.units};`,s+=this.isUnDefined(t.right)?"":`${e}-right:${t.right}${t.units};`,s+=this.isUnDefined(t.bottom)?"":`${e}-bottom:${t.bottom}${t.units};`):""};return i+=n?a(n,"padding"):"",i+=o?a(o,"margin"):""},processLayoutStyle(t,e){if(!this.isObject(t[e]))return"";const s=t[e];switch(s.type){case"grid":return this.generateGridStyles(s);case"stack":return this.generateStackStyles(s);default:return""}},generateGridStyles(t){let e="display:grid;";return t.columns&&t.columnWidth?this.isUnDefined(t.columnWidth.value)?"":(t.responsive?e+=`\n\t\t  --grid-layout-gap: ${t.gap.value}${t.gap.units};\n\t\t  --grid-column-count:${t.columns};\n\t\t  --grid-item--min-width: ${t.minColumnWidth.value}${t.minColumnWidth.units};\n\t\t  --gap-count: calc(var(--grid-column-count) - 1);\n\t\t  --total-gap-width: calc(var(--gap-count) * var(--grid-layout-gap));\n\t\t  --grid-item--max-width: calc((100% - var(--total-gap-width)) / var(--grid-column-count));\n\t\t  grid-template-columns: repeat(auto-fill, minmax(max(var(--grid-item--min-width), var(--grid-item--max-width)), 1fr));\n\t\t  grid-gap: var(--grid-layout-gap);\n\t\t  grid-auto-rows: min-content;\n\t\t`:(e+=`grid-template-columns: repeat(${t.columns}, minmax(${t.columnWidth.value}${t.columnWidth.units}, 1fr));`,e+="justify-content: center;",e+="grid-auto-rows: minmax(0, 1fr);",e+=`grid-template-rows: repeat(${t.rows}, minmax(0, 1fr));`,"gap"in t&&(e+=`gap: ${t.gap.value}${t.gap.units};`)),e):""},generateStackStyles(t){let e="display:flex;";return e+=t.direction?`flex-direction: ${t.direction};`:"",e+=t.distribute?`justify-content: ${t.distribute};`:"",e+=t.align?`align-items: ${t.align};`:"",e+=t.wrap?`flex-wrap: ${t.wrap};`:"",e+=t.placeContent?`align-content: ${t.placeContent};`:"","gap"in t&&(e+=t.gap.value&&t.gap.units?`gap: ${t.gap.value}${t.gap.units};`:""),e},processDimensionsStyle(t,e){if(!this.isObject(t[e]))return"";const s=t[e];let i="";return this.isObject(s.width)&&(i+=!this.isUnDefined(s.width.value)&&s.width.units?`width:${s.width.value}${s.width.units};`:""),this.isObject(s.maxWidth)&&(i+=!this.isUnDefined(s.maxWidth.value)&&s.maxWidth.units?`max-width:${s.maxWidth.value}${s.maxWidth.units};`:""),this.isObject(s.minWidth)&&(i+=!this.isUnDefined(s.minWidth.value)&&s.minWidth.units?`min-width:${s.minWidth.value}${s.minWidth.units};`:""),this.isObject(s.height)&&(i+=!this.isUnDefined(s.height.value)&&s.height.units?`height:${s.height.value}${s.height.units};`:""),this.isObject(s.minHeight)&&(i+=!this.isUnDefined(s.minHeight.value)&&s.minHeight.units?`min-height:${s.minHeight.value}${s.minHeight.units};`:""),this.isObject(s.maxHeight)&&(i+=!this.isUnDefined(s.maxHeight.value)&&s.maxHeight.units?`max-height:${s.maxHeight.value}${s.maxHeight.units};`:""),i+="grow"===s.grow?"flex-grow:1;":"",i+="shrink"===s.flexShrink?"flex-shrink:1;":"",i+="none"===s.flexShrink?"flex-shrink:0;":""},processStylesStyle(t,e){let s="";if(!this.isObject(t[e]))return s;const i=t[e];s+=this.isUnDefined(i.opacity)?"":`opacity: ${i.opacity};`,s+=i.overflow?`overflow: ${i.overflow};`:"";const n=this.hasNestedPath(i,"outline");if(this.hasNestedPath(n,"width","value")&&this.hasNestedPath(n,"color","value")){const t=n.width,e=this.handleColorOutput(n.color.value);n.offset;s+=!this.isUnDefined(t.value)&&t.units&&n.style&&e?`outline:${t.value}${t.units} ${n.style} ${e};`:""}if(this.hasNestedPath(n,"offset","value")){s+=!this.isUnDefined(n.offset.value)&&n.offset.units?`outline-offset:${n.offset.value}${n.offset.units};`:""}if(this.hasNestedPath(i,"fill","value")){const t=i.fill.value?this.handleColorOutput(i.fill.value):"",e=!!t.includes("gradient");e&&(s+=t?`background: ${t};`:""),e||(s+=t?`background-color: ${t};`:"")}if(this.hasNestedPath(i,"backgroundImage","url")){const t=i.backgroundImage.url;if(s+=t?`background-image: url(${t});`:"",this.hasNestedPath(i,"backgroundImage","sizing")){const t=i.backgroundImage.sizing;s+=t.position?`background-position:${t.position};`:"",s+=t.repeat?`background-repeat:${t.repeat};`:"",s+=t.size?`background-size:${t.size};`:"background-size:contain;"}}if(i.borders&&Array.isArray(i.borders))for(let t of i.borders)s+=this.processBorderStyle(t);if(this.hasNestedPath(i,"radius","topleft")){const t=i.radius;if(t.sync&&t.units)s+=!this.isUnDefined(t.topleft)&&t.units?`border-radius: ${t.topleft}${t.units};`:"";else if(t.units){s+=`border-radius: ${this.isUnDefined(t.topleft)?0:t.topleft+t.units} ${this.isUnDefined(t.topright)?0:t.topright+t.units} ${this.isUnDefined(t.bottomright)?0:t.bottomright+t.units} ${this.isUnDefined(t.bottomleft)?0:t.bottomleft+t.units};`}}return i.shadows&&Array.isArray(i.shadows)&&(s+=this.processShadowStyle(i.shadows)),s},processBorderStyle(t={}){let e="",s=this.hasNestedPath(t,"color","value"),i=this.hasNestedPath(t,"position"),n=this.hasNestedPath(t,"style"),o=this.hasNestedPath(t,"width","value"),a=this.hasNestedPath(t,"width","units"),r=this.hasNestedPath(t,"radius","value");if(!s&&!r)return e;if(s&&o&&a){e+=`${{solid:"border:",left:"border-left:",right:"border-right:",top:"border-top:",bottom:"border-bottom:"}[i]||""}${o}${a} ${n} ${s=this.handleColorOutput(s)};`}if(!r)return e;if(r.sync)e+=!this.isUnDefined(r.topleft)&&r.units?`border-radius: ${r.topleft}${r.units};`:"";else if(r.units){e+=`border-radius: ${this.isUnDefined(r.topleft)?0:r.topleft+r.units} ${this.isUnDefined(r.topright)?0:r.topright+r.units} ${this.isUnDefined(r.bottomright)?0:r.bottomright+r.units} ${this.isUnDefined(r.bottomleft)?0:r.bottomleft+r.units};`}return e},processShadowStyle(t=[]){let e="",s="",i=[];for(let e of t){let t=this.hasNestedPath(e,"color","value"),n=this.hasNestedPath(e,"verticalDistance","value"),o=this.hasNestedPath(e,"verticalDistance","value"),a=this.hasNestedPath(e,"blur","value"),r=this.hasNestedPath(e,"position");if(!(t&&n&&o&&a))continue;const h=`${n}px ${o}px ${a}px ${t=this.handleColorOutput(t)}`;"inside"===r?i.push(`inset ${h}`):s+=`drop-shadow(${h}) `}return e+=s?`filter: ${s};`:"",e+=i.length?`box-shadow: ${i.join(",")};`:""},handleColorOutput(t){if(!t)return;const e=t.trim();return e.startsWith("--")?`var(${e})`:e}}};