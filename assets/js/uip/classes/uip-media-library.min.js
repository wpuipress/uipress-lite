const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;import{uip}from"./uip.min.js";const uipress=new uip("production");import{createApp,getCurrentInstance,defineComponent}from"./../../libs/vue-esm-dev.js";import*as uipMediaBrowser from"../classes/uip-media-browser.js";import*as uipTooltip from"../modules/uip-tooltip.min.js";import*as uipDropdown from"../modules/uip-dropdown.min.js";import*as uipLoader from"../modules/uip-loading-chart.min.js";export class uipMediaLibrary{constructor(e){this.args=e,this.container=!1,this.events=[],this.mainApp=!1}create(){if("modal"==this.args.style&&(this.createContainer(),this.mountApp("#uip-media-library"),this.eventListeners()),"inline"==this.args.style){if(!this.args.mount)return void uipress.notify(__("Unable to mount","uipress-lite"),__("No element provided to mount to","uipress-lite"),"error");if(this.isElement(this.args.mount))this.container=this.args.mount;else{if(!document.querySelector(this.args.mount)[0])return void uipress.notify(__("Unable to mount","uipress-lite"),__("No elements found for sleector","uipress-lite"),"error")}this.mountApp(this.args.mount),this.eventListeners()}}isElement(e){return e instanceof Element||e instanceof HTMLDocument}eventListeners(){let e=this;"browse"!=this.args.useType&&document.addEventListener("uip_remove_media_gallery",function(i){e.destroyLibrary(i,e.container)})}destroyLibrary(e,i){let t=this;for(let e in this.events){let i=t.events[e];document.removeEventListener(i.event,i.func)}this.mainApp.unmount(),"inline"!=this.args.style&&this.container.remove()}on(e,i){this.events.push({event:e,func:i}),document.addEventListener(e,i)}createContainer(){let e=document.createElement("div");e.innerHTML='\t  <div class="uip-position-fixed uip-top-0 uip-left-0 uip-h-viewport uip-w-vw uip-background-black-wash uip-flex uip-flex-center uip-flex-middle uip-fade-in" style="z-index:10">\t\t  <div class="uip-background-default uip-border-round uip-border uip-padding-s uip-flex uip-flex-column uip-row-gap-xs uip-scale-in uip-min-w-350">\t\t    <div id="uip-media-library"></div>\t\t  </div>\t  </div>',this.container=document.body.appendChild(e)}mountApp(e){let i=this;const t=createApp({data:()=>({args:i.args}),provide:()=>({uipress:uipress}),template:'<media-browser :args="args"></media-browser>'});t.config.errorHandler=function(e,i,t){uipress.notify(e,"","error"),console.log(e)},t.component("media-browser",uipMediaBrowser.moduleData()),t.component("uip-tooltip",uipTooltip.moduleData()),t.component("uip-loader",uipLoader.moduleData()),t.component("drop-down",uipDropdown),t.mount(e),this.mainApp=t}};