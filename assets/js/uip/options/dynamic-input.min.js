const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;import{nextTick}from"../../libs/vue-esm.js";export default{props:{returnData:Function,value:Object},data(){return{open:!1,input:this.returnDefaultOptions,dynamics:this.uipApp.data.dynamicOptions,strings:{dynamicData:__("Dynamic data","uipress-lite"),currentValue:__("Current value","uipress-lite"),select:__("select","uipress-lite"),dataPos:__("Dynamic data position","uipress-lite")},positionOptions:{left:{label:__("Left","uipress-lite"),value:"left",placeHolder:""},right:{label:__("Right","uipress-lite"),value:"right",placeHolder:""}}}},watch:{value:{handler(i,t){this.updating||this.injectProp()},deep:!0,immediate:!0},input:{handler(i,t){if(this.updating)return;const n={string:this.input.string,dynamic:this.input.dynamic,dynamicKey:this.input.dynamicKey,dynamicPos:this.input.dynamicPos,dynamicType:"text"};this.returnData(n)},deep:!0}},computed:{returnDefaultOptions:()=>({string:"",dynamicPos:"left"})},methods:{async injectProp(){this.updating=!0;const i=this.returnDefaultOptions,t=this.isObject(this.value)?this.value:{};this.input={...i,...t},await nextTick(),this.updating=!1},chooseItem(i){i.key!=this.input.dynamicKey&&(this.input.dynamic=!0,this.input.dynamicKey=i.key,this.returnData({string:this.input.string,dynamic:this.input.dynamic,dynamicKey:this.input.dynamicKey,dynamicPos:this.input.dynamicPos}))},removeDynamicItem(){this.input.dynamic=!1,this.input.dynamicKey="",this.returnData({string:this.input.string,dynamic:this.input.dynamic,dynamicKey:this.input.dynamicKey,dynamicPos:this.input.dynamicPos})}},template:'\n    \n    <div class="uip-flex uip-gap-xxs uip-w-100p uip-flex-wrap">\n    \n        \x3c!--Old dynamic data only show if data has been set--\x3e\n        <dropdown pos="left center" v-if="input.dynamic"\n        :snapX="[\'#uip-block-settings\', \'#uip-template-settings\', \'#uip-global-settings\']">\n        \n            <template #trigger>\n                <span class="uip-border-rounder uip-text-l uip-flex uip-icon uip-padding-xxxs uip-text-center uip-link-default uip-background-muted"\n                :class="{\'uip-background-primary uip-text-inverse\' : this.input.dynamic}">\n                  database\n                </span>\n            </template>\n            \n            <template #content>\n              <div class="uip-padding-xs uip-max-w-260">\n                <div class="uip-flex uip-flex-wrap uip-flex-start uip-gap-xs uip-row-gap-xs uip-w-250 uip-max-h-200 uip-scrollbar uip-overflow-auto">\n                  <template v-for="dynamic in dynamics">\n                   <div v-if="dynamic.type == \'text\'" class="uip-border-round hover:uip-background-muted uip-border-round uip-padding-xxs uip-flex uip-flex-between uip-flex-center uip-flex-middle uip-cursor-pointer uip-w-100p"  :class="{\'uip-background-primary-wash\' : this.input.dynamicKey == dynamic.key}">\n                     <div class="">\n                      <div class="uip-text-s uip-text-bold">{{dynamic.label}}</div>\n                      <div class="uip-text-xs uip-text-muted">{{strings.currentValue + \': \' + dynamic.value}}</div>\n                     </div>\n                     <span v-if="this.input.dynamicKey == dynamic.key" @click="removeDynamicItem()"\n                     class="uip-padding-xxs uip-border-round uip-background-muted hover:uip-background-grey uip-cursor-pointer uip-flex uip-flex-middle uip-flex-center">\n                      <span class="uip-icon">delete</span>\n                     </span>\n                     <span v-else @click="chooseItem(dynamic)"\n                      class="uip-padding-xxs uip-border-round uip-background-muted hover:uip-background-grey uip-cursor-pointer uip-flex uip-flex-middle uip-flex-center">\n                       {{strings.select}}\n                      </span>\n                   </div>\n                  </template>\n                </div>\n              </div>\n            </template>\n            \n        </dropdown>\n                \n        \n        <input type="text" class="uip-input-small uip-border-left-remove uip-flex-grow"  v-model="input.string">\n        \n        \n        <div v-if="input.dynamic" class="uip-w-100p">\n          <div class="uip-text-s uip-text-muted uip-margin-bottom-xxs uip-margin-top-xs">\n            {{strings.dataPos}}\n          </div>\n          <div>\n            <toggle-switch :options="positionOptions" :activeValue="input.dynamicPos" :returnValue="function(data){ input.dynamicPos = data}"></toggle-switch>\n          </div>\n        </div>\n        \n    </div>\n        '};