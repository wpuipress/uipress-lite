const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;import"../../libs/ace-editor.min.js";import"../../libs/ace-editor-css.min.js";import"../../libs/ace-editor-javascript.min.js";import"../../libs/ace-editor-html.min.js";import"../../libs/ace-theme-dracular.min.js";import"../../libs/ace-editor-beautify.min.js";export default{props:{returnData:Function,value:String,args:Object},data(){return{option:"",editor:Object,language:this.args.language,fullScreen:!1,finalVal:"",modalOpen:!1,strings:{openFullscreen:__("Fullscreen","uipress-lite"),closeFullscreen:__("Exit fullscreen","uipress-lite"),codeEditor:__("Code editor","uipress-lite"),editCode:__("Edit code","uipress-lite"),add:__("Add","uipress-lite")}}},inject:["uipress"],mounted(){this.option=this.value,this.initiateEditor()},watch:{option:{handler(e,i){this.returnData(this.option)},deep:!0}},computed:{returnCode(){return this.option}},methods:{initiateEditor(){switch(this.beautify=ace.require("ace/ext/beautify"),this.editor=ace.edit(this.$refs.codeeditor),this.editor.setTheme("ace/theme/dracula"),this.editor.session.setUseWrapMode(!0),this.editor.setShowPrintMargin(!1),this.editor.renderer.setScrollMargin(14,14),this.editor.container.style.lineHeight=1.6,this.editor.renderer.updateFontSize(),this.editor.renderer.setPadding(16),this.editor.setHighlightActiveLine(!1),this.editor.setOptions({maxLines:1/0,tabSize:3,wrap:0,indentedSoftWrap:!1,fontSize:"0.8rem",wrap:1,indentedSoftWrap:!0,useWorker:!1,fontSize:"12px"}),this.language||(this.language="css"),this.language){case"css":this.editor.session.setMode("ace/mode/css");case"javascript":this.editor.session.setMode("ace/mode/javascript");case"html":this.editor.session.setMode("ace/mode/html")}const e=structuredClone(this.option);this.editor.setValue(e,-1),this.beautify.beautify(this.editor.session);this.editor.session.on("change",()=>{this.finalVal=this.editor.getValue()})},closeModal(e){e.target.contains(this.$refs.modalInner)&&(this.modalOpen=!1)},saveCode(){this.option=this.finalVal,this.modalOpen=!1,this.uipress.notify(__("Code updated","uipress-lite"),"","success")},clearCode(){this.option=""}},template:'\n    \n    \n    <div class="uip-w-100p">\n    \n        <button class="uip-button-default uip-border-rounder uip-padding-xxs uip-w-100p uip-flex uip-gap-xs uip-flex-center uip-text-left" @click="modalOpen = true">\n        \n          <div class="uip-background-primary uip-text-inverse uip-border-round uip-padding-xxxs"><span class="uip-icon">code</span></div>\n          \n          <span v-if="!returnCode" class="uip-text-s uip-link-muted uip-flex-grow">{{strings.add}}...</span>\n          <span v-else class="uip-text-s uip-flex-grow">{{strings.editCode}}</span>\n          \n          <a @click.prevent.stop="clearCode"\n          v-if="returnCode"\n          class="uip-no-underline uip-border-rounder uip-padding-xxxs uip-link-muted uip-text-s"><span class="uip-icon">close</span></a>\n          \n        </button>\n        \n        \n        <div v-show="modalOpen" class="uip-position-fixed uip-top-0 uip-left-0 uip-h-viewport uip-w-vw uip-background-black-wash uip-flex uip-flex-center uip-flex-middle uip-fade-in uip-z-index-9999" @click="closeModal($event)">\n        \n          <div class="uip-background-muted uip-border-rounder uip-border uip-flex uip-flex-column uip-scale-in uip-min-w-600 uip-min-w-200 uip-max-w-100p uip-text-normal uip-position-relative uip-modal-body uip-flex uip-flex-column uip-dark-mode" ref="modalInner">\n            \n            \n            <div class="uip-padding-xs uip-border-bottom uip-flex uip-flex-between">\n              <span>{{strings.codeEditor}}</span>\n              <span class="uip-icon uip-text-l uip-link-muted" @click="modalOpen = false">close</span>\n            </div>\n          \n            <div class="">\n            \n              <div class="uip-min-h-400 uip-w-100p uip-scrollbar uip-flex-grow" style="border-radius: 0 0 var(--uip-border-radius-large) var(--uip-border-radius-large)" ref="codeeditor">\n              </div>\n              \n            </div>  \n            \n            \n            <div class="uip-padding-xs uip-flex uip-flex-between">\n              <button class="uip-button-default uip-background-grey" @click="modalOpen = false">Cancel</button>\n              <button class="uip-button-primary" @click="saveCode()">Save</button>\n            </div>\n            \n          \n          </div>\n          \n          \n        </div>  \n    \n    \n    </div>\n    \n    '};